"use strict";(self["webpackChunkpaike_sut"]=self["webpackChunkpaike_sut"]||[]).push([[54],{96054:function(t,n,e){e.r(n),e.d(n,{default:function(){return $}});e(67437),e(9910),e(80033),e(46226),e(20877),e(97579),e(28474),e(76905),e(83069),e(86809),e(172),e(89007),e(67219);var i=e(4143),s=e(54827),a=e(51853),u=e(61832),o=e(41015),r=e(43209),l=e(10426),c=e(71267),f=e(73060),d=e(61244),h=(e(47042),e(74916),e(64765),e(73396)),y=e(87139),p=e(49242),m=function(t){return(0,h.dD)("data-v-3f205541"),t=t(),(0,h.Cn)(),t},g=m((function(){return(0,h._)("h4",null,"报修信息管理",-1)})),w=m((function(){return(0,h._)("br",null,null,-1)})),b=(0,h.Uk)("维修管理"),S=(0,h.Uk)("学院"),k=(0,h.Uk)("实验室门牌号"),L=(0,h.Uk)("实验室类型"),W=(0,h.Uk)("故障描述"),x=(0,h.Uk)(" 无需维修 "),_=(0,h.Uk)("故障描述"),C=m((function(){return(0,h._)("br",null,null,-1)})),v={key:0,style:{"text-align":"center"}},z=(0,h.Uk)("维修"),I=(0,h.Uk)("维修");function U(t,n,e,m,U,V){var Y=d.os,B=r.$Y,D=f.EZ,N=c.mi,F=l.R,O=r.eI,$=(0,h.up)("i-tickets"),J=o.gn,P=u.QQ,R=(0,h.up)("i-location-information"),T=(0,h.up)("i-timer"),j=(0,h.up)("i-remove-filled"),H=u.Lf,Q=a.p8,Z=a.Ub,q=s.d0,E=i.Kf;return(0,h.wg)(),(0,h.j4)(E,{class:"account-container"},{default:(0,h.w5)((function(){return[g,(0,h.Wm)(Y),w,(0,h.Wm)(O,{data:V.getSysFilter.slice((U.currentPage-1)*U.pagesize,U.currentPage*U.pagesize),style:{width:"100%"}},{append:(0,h.w5)((function(){return[(0,h.Wm)(F,{onSizeChange:V.handleSizeChange,onCurrentChange:V.handleCurrentChange,"current-page":U.currentPage,"page-sizes":[5,10,20,40],"page-size":U.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:V.getSysFilter.length},null,8,["onSizeChange","onCurrentChange","current-page","page-size","total"])]})),default:(0,h.w5)((function(){return[(0,h.Wm)(B,{type:"index"}),(0,h.Wm)(B,{label:"实验名称",prop:"sysmc",width:"220rem"}),(0,h.Wm)(B,{label:"门牌号",prop:"sysmph"}),(0,h.Wm)(B,{label:"容量",prop:"capacity"}),(0,h.Wm)(B,{label:"状态",prop:"state"}),(0,h.Wm)(B,{label:"操作",width:"300rem"},{header:(0,h.w5)((function(){return[(0,h.Wm)(D,{modelValue:U.search,"onUpdate:modelValue":n[0]||(n[0]=function(t){return U.search=t}),placeholder:"输入实验室门牌号、名称过滤"},null,8,["modelValue"])]})),default:(0,h.w5)((function(t){return[(0,h.Wm)(N,{type:"primary",onClick:function(n){return V.repairSysDialog(t.row)}},{default:(0,h.w5)((function(){return[b]})),_:2},1032,["onClick"])]})),_:1})]})),_:1},8,["data"]),(0,h.Wm)(q,{modelValue:m.sysDialogVisible,"onUpdate:modelValue":n[3]||(n[3]=function(t){return m.sysDialogVisible=t}),title:"报修信息管理",width:"60%","before-close":m.handleClose},{default:(0,h.w5)((function(){return[(0,h.Wm)(Z,{modelValue:U.activeName,"onUpdate:modelValue":n[2]||(n[2]=function(t){return U.activeName=t}),onTabClick:V.handleClick},{default:(0,h.w5)((function(){return[(0,h.Wm)(Q,{label:"非设备维修",name:"first"},{default:(0,h.w5)((function(){return[(0,h.Wm)(H,{column:1,border:""},{default:(0,h.w5)((function(){return[(0,h.Wm)(P,null,{label:(0,h.w5)((function(){return[(0,h.Wm)(J,null,{default:(0,h.w5)((function(){return[(0,h.Wm)($)]})),_:1}),S]})),default:(0,h.w5)((function(){return[(0,h.Uk)((0,y.zw)(U.Yxs.dwmc),1)]})),_:1}),(0,h.Wm)(P,null,{label:(0,h.w5)((function(){return[(0,h.Wm)(J,null,{default:(0,h.w5)((function(){return[(0,h.Wm)(R)]})),_:1}),k]})),default:(0,h.w5)((function(){return[(0,h.Uk)((0,y.zw)(U.Sys.sysmph),1)]})),_:1}),(0,h.Wm)(P,null,{label:(0,h.w5)((function(){return[(0,h.Wm)(J,null,{default:(0,h.w5)((function(){return[(0,h.Wm)(T)]})),_:1}),L]})),default:(0,h.w5)((function(){return[(0,h.Uk)(" "+(0,y.zw)(U.Sys.sysmc),1)]})),_:1}),void 0==U.Sys.info?((0,h.wg)(),(0,h.j4)(P,{key:0},{label:(0,h.w5)((function(){return[(0,h.Wm)(J,null,{default:(0,h.w5)((function(){return[(0,h.Wm)(j)]})),_:1}),W]})),default:(0,h.w5)((function(){return[x]})),_:1})):((0,h.wg)(),(0,h.j4)(P,{key:1},{label:(0,h.w5)((function(){return[(0,h.Wm)(J,null,{default:(0,h.w5)((function(){return[(0,h.Wm)(j)]})),_:1}),_]})),default:(0,h.w5)((function(){return[(0,h.Uk)(" "+(0,y.zw)(U.Sys.info),1)]})),_:1}))]})),_:1}),C,void 0!=U.Sys.info?((0,h.wg)(),(0,h.iD)("div",v,[(0,h.Wm)(N,{size:"large",type:"primary",style:{width:"6rem"},onClick:n[1]||(n[1]=(0,p.iM)((function(t){return V.sysRepairButton()}),["prevent"]))},{default:(0,h.w5)((function(){return[z]})),_:1})])):(0,h.kq)("",!0)]})),_:1}),(0,h.Wm)(Q,{label:"设备维修",name:"second"},{default:(0,h.w5)((function(){return[(0,h.Wm)(O,{data:V.sbTableInfo,style:{width:"100%"}},{default:(0,h.w5)((function(){return[(0,h.Wm)(B,{type:"index"}),(0,h.Wm)(B,{label:"设备名称",prop:"sbmc"}),(0,h.Wm)(B,{label:"设备状态",prop:"state"}),(0,h.Wm)(B,{label:"故障信息",prop:"info"}),(0,h.Wm)(B,{label:"操作"},{default:(0,h.w5)((function(t){return[(0,h.Wm)(N,{type:"primary",onClick:function(n){return V.sbRepairButton(t.row.sbh)}},{default:(0,h.w5)((function(){return[I]})),_:2},1032,["onClick"])]})),_:1})]})),_:1},8,["data"])]})),_:1})]})),_:1},8,["modelValue","onTabClick"])]})),_:1},8,["modelValue","before-close"])]})),_:1})}var V=e(61897),Y=e(85574),B=(e(93970),e(77233),e(38862),e(68309),e(57327),e(41539),e(21249),e(26699),e(32023),e(44870)),D=e(12826),N={setup:function(){var t=(0,B.iH)(""),n=(0,B.iH)(!1),e=function(t){V.T.confirm("确定关闭对话框?","温馨提示",{type:"info",center:!0}).then((function(){t()}))};return{YxsOption:t,handleClose:e,sysDialogVisible:n}},created:function(){var t=sessionStorage.getItem("userInfo");t?this.userInfo=JSON.parse((0,D.Ne)(t)):this.$router.push("/login"),this.getSysListById(this.userInfo.yxsh),this.getYxsById(this.userInfo.yxsh)},data:function(){return{userInfo:null,currentPage:1,pagesize:10,search:"",Yxs:{},SysList:[],Sys:{},activeName:"first",SbList:[],Sb:{}}},methods:{handleSizeChange:function(t){this.pagesize=t},handleCurrentChange:function(t){this.currentPage=t},changeYxs:function(){this.Yxs=JSON.parse(JSON.stringify(this.YxsOption)),this.YxsOption=this.Yxs.dwmc,Loading.show(),this.getSysListById(this.Yxs.dwh),Loading.hide()},getYxsById:function(t){var n=this;this.$axios.post("/weixin-yxs/yxsById",{id:t}).then((function(t){var e=t.data;200==e.code&&(n.Yxs=e.data)}))},getSysListById:function(t){var n=this;this.$axios.post("/weixin-syszk/yxsFaultSysList",{id:t}).then((function(t){var e=t.data;200==e.code&&(n.SysList=e.data)}))},getSbFaultList:function(t){var n=this;this.$axios.post("/weixin-sbzk/sbFaultSbList",{sysh:t}).then((function(t){var e=t.data;200==e.code&&(n.SbList=e.data)}))},repairSysDialog:function(t){this.Sys=JSON.parse(JSON.stringify(t)),this.sysDialogVisible=!0,Loading.show(),this.getSbFaultList(this.Sys.sysh),Loading.hide()},handleClick:function(t){"second"==t.props.name&&0==this.SbList.length&&(Loading.show(),this.getSbFaultList(this.Sys.sysh),Loading.hide())},sysRepairButton:function(){var t=this;Loading.show(),this.$axios.post("/weixin-syszk/repairSys",{sysh:this.Sys.sysh,info:"",systype:"0"}).then((function(n){var e=n.data;200==e.code&&(Y.z8.success("维修成功"),Loading.hide(),t.sysDialogVisible=!1,Loading.show(),t.getSysListById(t.Yxs.dwh),Loading.hide())})).catch((function(t){Loading.hide()}))},sbRepairButton:function(t){var n=this;Loading.show(),this.$axios.post("/weixin-sbzk/repairSb",{sysh:this.Sys.sysh,info:"",sbzt:"0",sbh:t}).then((function(t){var e=t.data;200==e.code&&(Y.z8.success("维修成功"),Loading.hide(),n.sysDialogVisible=!1,Loading.show(),n.getSysListById(n.Yxs.dwh),Loading.hide())})).catch((function(t){Loading.hide()}))}},computed:{getSysFilter:function(){var t=this;return this.SysList.map((function(t){return 0==t.systype?t["state"]="开放":1==t.systype?t["state"]="禁用":t["state"]="报修",t})).filter((function(n){return!t.search||n.sysmc.includes(t.search.toLowerCase())||n.sysmph.includes(t.search.toLowerCase())||n.state.includes(t.search.toLowerCase())}))},sbTableInfo:function(){return this.SbList.map((function(t){return 0==t.sbzt?t["state"]="开放":1==t.sbzt?t["state"]="禁用":t["state"]="报修",t}))}}},F=e(40089);const O=(0,F.Z)(N,[["render",U],["__scopeId","data-v-3f205541"]]);var $=O},86809:function(t,n,e){e(11758)},67437:function(t,n,e){e(11758)},88:function(t,n,e){e(11758)},97579:function(t,n,e){e(11758)},20877:function(t,n,e){e(11758),e(97579)},9910:function(t,n,e){e(11758),e(47195)},67219:function(t,n,e){e(11758)},172:function(t,n,e){e(11758)},93970:function(t,n,e){e(11758),e(86809),e(172),e(47195)},17960:function(t,n,e){e(11758)},47195:function(t,n,e){e(11758)},83069:function(t,n,e){e(11758),e(33877)},70451:function(t,n,e){e(11758)},33877:function(t,n,e){e(11758),e(172),e(31430),e(17960),e(70451),e(86467)},46226:function(t,n,e){e(11758)},89007:function(t,n,e){e(11758),e(88),e(31430)},76905:function(t,n,e){e(11758),e(88),e(31430),e(44566),e(70451)},80033:function(t,n,e){e(11758)}}]);
//# sourceMappingURL=54-legacy.e278bee6.js.map