"use strict";(self["webpackChunkpaike_sut"]=self["webpackChunkpaike_sut"]||[]).push([[772],{1772:function(e,s,t){t.r(s),t.d(s,{default:function(){return te}});t(7437),t(1758),t(8474),t(9910),t(2064),t(3429),t(7113),t(6905),t(3069),t(3855),t(172),t(9007),t(451),t(6809),t(3877),t(7960),t(7219);var a=t(4143),l=t(9523),d=t(1015),o=t(4827),i=t(1853),n=t(7188),m=t(3732),u=t(3209),c=t(426),r=t(2563),y=t(3060),f=t(6739),h=t(1267),p=t(7927),b=t(1244),w=t(3396);const g=e=>((0,w.dD)("data-v-793dac44"),e=e(),(0,w.Cn)(),e),S=g((()=>(0,w._)("h4",null,"实验室管理",-1))),I=g((()=>(0,w._)("br",null,null,-1))),_={style:{display:"flex","align-items":"center"}},W=g((()=>(0,w._)("p",{style:{"margin-right":"1rem"}},"学院",-1))),x=(0,w.Uk)("添加实验室"),V=(0,w.Uk)("管理"),k=(0,w.Uk)("删除"),C=(0,w.Uk)("开放"),z=(0,w.Uk)("禁用"),v=(0,w.Uk)("报修"),U={style:{margin:"0 auto"}},L=(0,w.Uk)("更新"),Y=(0,w.Uk)("重置"),D=(0,w.Uk)("删除"),$=(0,w.Uk)("正常"),q=(0,w.Uk)("故障"),F={style:{margin:"0 auto"}},B=(0,w.Uk)("添加"),R=(0,w.Uk)("重置"),T=(0,w.Uk)("开放"),O=(0,w.Uk)("禁用"),N=(0,w.Uk)("报修"),M={style:{margin:"0 auto"}},P=(0,w.Uk)("添加"),A=(0,w.Uk)("重置"),H={style:{"text-align":"center"}},J=g((()=>(0,w._)("div",{class:"el-upload__text"},[(0,w.Uk)("拖拽文件到这或者"),(0,w._)("em",null,"点击上传")],-1))),j=g((()=>(0,w._)("div",{class:"el-upload__tip"},"需要上传指定格式的csv文件,请先下载模版,仿照着写",-1))),K=g((()=>(0,w._)("a",{href:"/addLabs.csv",download:"addLabs.csv"},"模版下载",-1)));function Z(e,s,t,g,Z,E){const G=b.os,Q=p.BT,X=p.km,ee=h.mi,se=f.Mr,te=u.$Y,ae=y.EZ,le=r.i1,de=c.R,oe=u.eI,ie=n.nH,ne=m.rh,me=m.KD,ue=n.ly,ce=i.p8,re=i.Ub,ye=o.d0,fe=(0,w.up)("i-upload-filled"),he=d.gn,pe=l.LW,be=a.Kf;return(0,w.wg)(),(0,w.j4)(be,{class:"account-container"},{default:(0,w.w5)((()=>[S,(0,w.Wm)(G),I,(0,w.Wm)(se,null,{default:(0,w.w5)((()=>[(0,w._)("div",_,[W,(0,w.Wm)(X,{modelValue:Z.YxsOption,"onUpdate:modelValue":s[0]||(s[0]=e=>Z.YxsOption=e),placeholder:"Select",onChange:E.changeYxs,style:{"margin-right":"1rem"}},{default:(0,w.w5)((()=>[((0,w.wg)(!0),(0,w.iD)(w.HY,null,(0,w.Ko)(Z.YxsList,((e,s)=>((0,w.wg)(),(0,w.j4)(Q,{key:s,label:e.dwmc,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"]),(0,w.Wm)(ee,{type:"primary",style:{display:"inline-block"},onClick:E.addSysDialog},{default:(0,w.w5)((()=>[x])),_:1},8,["onClick"])])])),_:1}),(0,w.Wm)(oe,{data:E.getSysFilter.slice((Z.currentPage-1)*Z.pagesize,Z.currentPage*Z.pagesize),style:{width:"100%"}},{append:(0,w.w5)((()=>[(0,w.Wm)(de,{onSizeChange:E.handleSizeChange,onCurrentChange:E.handleCurrentChange,"current-page":Z.currentPage,"page-sizes":[5,10,20,40],"page-size":Z.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:E.getSysFilter.length},null,8,["onSizeChange","onCurrentChange","current-page","page-size","total"])])),default:(0,w.w5)((()=>[(0,w.Wm)(te,{type:"index"}),(0,w.Wm)(te,{label:"实验名称",prop:"sysmc",width:"220rem"}),(0,w.Wm)(te,{label:"门牌号",prop:"sysmph"}),(0,w.Wm)(te,{label:"容量",prop:"capacity"}),(0,w.Wm)(te,{label:"状态",prop:"state"}),(0,w.Wm)(te,{label:"操作",width:"300rem"},{header:(0,w.w5)((()=>[(0,w.Wm)(ae,{modelValue:Z.search,"onUpdate:modelValue":s[1]||(s[1]=e=>Z.search=e),placeholder:"输入实验室门牌号、名称搜索"},null,8,["modelValue"])])),default:(0,w.w5)((e=>[(0,w.Wm)(ee,{type:"primary",onClick:s=>E.changeSysInfo(e.row)},{default:(0,w.w5)((()=>[V])),_:2},1032,["onClick"]),(0,w.Wm)(le,{title:"确定要删除该实验室?",onConfirm:s=>E.deleteSysById(e.row.sysh)},{reference:(0,w.w5)((()=>[(0,w.Wm)(ee,{type:"danger"},{default:(0,w.w5)((()=>[k])),_:1})])),_:2},1032,["onConfirm"])])),_:1})])),_:1},8,["data"]),(0,w.Wm)(ye,{modelValue:g.dialogVisible,"onUpdate:modelValue":s[12]||(s[12]=e=>g.dialogVisible=e),title:"实验室管理",width:"60%","before-close":g.handleClose},{default:(0,w.w5)((()=>[(0,w.Wm)(re,{onTabClick:E.tabsClick},{default:(0,w.w5)((()=>[(0,w.Wm)(ce,{label:"修改实验室信息",name:"first"},{default:(0,w.w5)((()=>[(0,w.Wm)(ue,{ref:"sysInfoRef",model:Z.SysInfo,"label-position":"left",class:"sys-form"},{default:(0,w.w5)((()=>[(0,w.Wm)(ie,{label:"实验室的名称",prop:"sysmc",rules:[{required:!0,message:"必需填写,例如: 人工智能实验室, 例如: 机房"}]},{default:(0,w.w5)((()=>[(0,w.Wm)(ae,{modelValue:Z.SysInfo.sysmc,"onUpdate:modelValue":s[2]||(s[2]=e=>Z.SysInfo.sysmc=e),type:"text",autocomplete:"off"},null,8,["modelValue"])])),_:1}),(0,w.Wm)(ie,{label:"实验室门牌号",prop:"sysmph",rules:[{required:!0,message:"必需填写,表示实验室位置,例如: 205"}]},{default:(0,w.w5)((()=>[(0,w.Wm)(ae,{modelValue:Z.SysInfo.sysmph,"onUpdate:modelValue":s[3]||(s[3]=e=>Z.SysInfo.sysmph=e),type:"text",autocomplete:"off"},null,8,["modelValue"])])),_:1}),(0,w.Wm)(ie,{label:"实验室的容量",prop:"capacity",rules:[{required:!0,message:"必需填写,实验室的人数,例如: 40"}]},{default:(0,w.w5)((()=>[(0,w.Wm)(ae,{modelValue:Z.SysInfo.capacity,"onUpdate:modelValue":s[4]||(s[4]=e=>Z.SysInfo.capacity=e),type:"number",min:"0",autocomplete:"off"},null,8,["modelValue"])])),_:1}),(0,w.Wm)(ie,{label:"实验室的类型",rules:[{required:!0,message:"必需选择，默认开放"}]},{default:(0,w.w5)((()=>[(0,w.Wm)(me,{modelValue:Z.SysInfo.systype,"onUpdate:modelValue":s[5]||(s[5]=e=>Z.SysInfo.systype=e)},{default:(0,w.w5)((()=>[(0,w.Wm)(ne,{label:"0"},{default:(0,w.w5)((()=>[C])),_:1}),(0,w.Wm)(ne,{label:"1"},{default:(0,w.w5)((()=>[z])),_:1}),(0,w.Wm)(ne,{label:"2"},{default:(0,w.w5)((()=>[v])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,w.Wm)(ie,null,{default:(0,w.w5)((()=>[(0,w._)("div",U,[(0,w.Wm)(ee,{type:"primary",onClick:s[6]||(s[6]=e=>E.updateSysInfo("sysInfoRef"))},{default:(0,w.w5)((()=>[L])),_:1}),(0,w.Wm)(ee,{onClick:s[7]||(s[7]=e=>E.resetForm("sysInfoRef"))},{default:(0,w.w5)((()=>[Y])),_:1})])])),_:1})])),_:1},8,["model"])])),_:1}),(0,w.Wm)(ce,{label:"设备管理",name:"second"},{default:(0,w.w5)((()=>[(0,w.Wm)(oe,{data:E.sbTableInfo,style:{width:"100%"}},{default:(0,w.w5)((()=>[(0,w.Wm)(te,{type:"index"}),(0,w.Wm)(te,{label:"设备名称",prop:"sbmc",width:"220rem"}),(0,w.Wm)(te,{label:"设备状态",prop:"state",width:"220rem"}),(0,w.Wm)(te,{label:"操作",width:"300rem"},{default:(0,w.w5)((e=>[(0,w.Wm)(le,{title:"确定要删除该实验室?",onConfirm:s=>E.deleteDevice(e.row.sbh)},{reference:(0,w.w5)((()=>[(0,w.Wm)(ee,{type:"danger"},{default:(0,w.w5)((()=>[D])),_:1})])),_:2},1032,["onConfirm"])])),_:1})])),_:1},8,["data"])])),_:1}),(0,w.Wm)(ce,{label:"添加设备",name:"third"},{default:(0,w.w5)((()=>[(0,w.Wm)(ue,{ref:"addSbInfoRef",model:Z.addSbInfo,"label-position":"left",class:"sys-form"},{default:(0,w.w5)((()=>[(0,w.Wm)(ie,{label:"设备的名称",prop:"sysmc",rules:[{required:!0,message:"必需填写,例如: 投影仪"}]},{default:(0,w.w5)((()=>[(0,w.Wm)(ae,{modelValue:Z.addSbInfo.sbmc,"onUpdate:modelValue":s[8]||(s[8]=e=>Z.addSbInfo.sbmc=e),type:"text",autocomplete:"off"},null,8,["modelValue"])])),_:1}),(0,w.Wm)(ie,{label:"设备的状态",rules:[{required:!0,message:"必需选择，默认开放"}]},{default:(0,w.w5)((()=>[(0,w.Wm)(me,{modelValue:Z.addSbInfo.sbzt,"onUpdate:modelValue":s[9]||(s[9]=e=>Z.addSbInfo.sbzt=e)},{default:(0,w.w5)((()=>[(0,w.Wm)(ne,{label:"0"},{default:(0,w.w5)((()=>[$])),_:1}),(0,w.Wm)(ne,{label:"1"},{default:(0,w.w5)((()=>[q])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,w.Wm)(ie,null,{default:(0,w.w5)((()=>[(0,w._)("div",F,[(0,w.Wm)(ee,{type:"primary",onClick:s[10]||(s[10]=e=>E.addSb())},{default:(0,w.w5)((()=>[B])),_:1}),(0,w.Wm)(ee,{onClick:s[11]||(s[11]=e=>E.resetForm("addSbInfoRef"))},{default:(0,w.w5)((()=>[R])),_:1})])])),_:1})])),_:1},8,["model"])])),_:1})])),_:1},8,["onTabClick"])])),_:1},8,["modelValue","before-close"]),(0,w.Wm)(ye,{modelValue:g.addDialogVisible,"onUpdate:modelValue":s[20]||(s[20]=e=>g.addDialogVisible=e),title:"添加实验室",width:"60%","before-close":g.handleClose},{default:(0,w.w5)((()=>[(0,w.Wm)(re,{modelValue:Z.activeName,"onUpdate:modelValue":s[19]||(s[19]=e=>Z.activeName=e),onTabClick:E.handleClick},{default:(0,w.w5)((()=>[(0,w.Wm)(ce,{label:"单个添加",name:"first"},{default:(0,w.w5)((()=>[(0,w.Wm)(ue,{ref:"addSysInfoRef",model:Z.addSysInfo,"label-position":"left",class:"sys-form"},{default:(0,w.w5)((()=>[(0,w.Wm)(ie,{label:"实验室的名称",prop:"sysmc",rules:[{required:!0,message:"非必需填写,例如: 人工智能实验室, 不填写的话默认名称: 机房"}]},{default:(0,w.w5)((()=>[(0,w.Wm)(ae,{modelValue:Z.addSysInfo.sysmc,"onUpdate:modelValue":s[13]||(s[13]=e=>Z.addSysInfo.sysmc=e),type:"text",autocomplete:"off"},null,8,["modelValue"])])),_:1}),(0,w.Wm)(ie,{label:"实验室门牌号",prop:"sysmph",rules:[{required:!0,message:"必需填写,表示实验室位置,例如: 205"}]},{default:(0,w.w5)((()=>[(0,w.Wm)(ae,{modelValue:Z.addSysInfo.sysmph,"onUpdate:modelValue":s[14]||(s[14]=e=>Z.addSysInfo.sysmph=e),type:"text",autocomplete:"off"},null,8,["modelValue"])])),_:1}),(0,w.Wm)(ie,{label:"实验室的容量",prop:"capacity",rules:[{required:!0,message:"必需填写,实验室的人数,例如: 40"}]},{default:(0,w.w5)((()=>[(0,w.Wm)(ae,{modelValue:Z.addSysInfo.capacity,"onUpdate:modelValue":s[15]||(s[15]=e=>Z.addSysInfo.capacity=e),type:"number",min:"0",autocomplete:"off"},null,8,["modelValue"])])),_:1}),(0,w.Wm)(ie,{label:"实验室的类型",rules:[{required:!0,message:"必需选择，默认开放"}]},{default:(0,w.w5)((()=>[(0,w.Wm)(me,{modelValue:Z.addSysInfo.systype,"onUpdate:modelValue":s[16]||(s[16]=e=>Z.addSysInfo.systype=e)},{default:(0,w.w5)((()=>[(0,w.Wm)(ne,{label:"0"},{default:(0,w.w5)((()=>[T])),_:1}),(0,w.Wm)(ne,{label:"1"},{default:(0,w.w5)((()=>[O])),_:1}),(0,w.Wm)(ne,{label:"2"},{default:(0,w.w5)((()=>[N])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,w.Wm)(ie,null,{default:(0,w.w5)((()=>[(0,w._)("div",M,[(0,w.Wm)(ee,{type:"primary",onClick:s[17]||(s[17]=e=>E.addSys("addSysInfoRef"))},{default:(0,w.w5)((()=>[P])),_:1}),(0,w.Wm)(ee,{onClick:s[18]||(s[18]=e=>E.resetForm("addSysInfoRef"))},{default:(0,w.w5)((()=>[A])),_:1})])])),_:1})])),_:1},8,["model"])])),_:1}),(0,w.Wm)(ce,{label:"批量添加",name:"second"},{default:(0,w.w5)((()=>[(0,w._)("div",H,[(0,w.Wm)(pe,{drag:"",action:"","http-request":E.uploadCSVFile,limit:1,accept:".csv"},{tip:(0,w.w5)((()=>[j])),default:(0,w.w5)((()=>[(0,w.Wm)(he,{class:"el-icon--upload"},{default:(0,w.w5)((()=>[(0,w.Wm)(fe)])),_:1}),J])),_:1},8,["http-request"]),(0,w.Wm)(ee,{type:"primary"},{default:(0,w.w5)((()=>[K])),_:1})])])),_:1})])),_:1},8,["modelValue","onTabClick"])])),_:1},8,["modelValue","before-close"])])),_:1})}var E=t(1897),G=t(5574),Q=(t(3970),t(7233),t(4870)),X={setup(){const e=(0,Q.iH)(!1),s=(0,Q.iH)(!1),t=e=>{E.T.confirm("确定关闭对话框?","温馨提示",{type:"info",center:!0}).then((()=>{e()}))};return{dialogVisible:e,handleClose:t,addDialogVisible:s}},data(){return{currentPage:1,pagesize:10,search:"",YxsList:[],YxsOption:"选择学院",YxsId:"",YxsMc:"",SysList:[],SysInfo:{sysh:"",sysmc:"",sysmph:"",systype:"",yxsh:"",yxmc:""},activeName:"first",addSysInfo:{sysmc:"",sysmph:"",capacity:"",systype:"0"},sbList:[],addSbInfo:{sysh:"",sbmc:"",sbzt:"0"}}},created(){this.getYxsList()},methods:{handleClick(e,s){console.log(e,s)},clearSysInfo(){this.SysInfo={sysh:"",sysmc:"",sysmph:"",yxsh:"",yxmc:"",capacity:"",systype:0}},claearAddSbInfo(){this.addSbInfo={sysh:"",sbmc:"",sbzt:"0"}},resetForm(e){this.$refs[e].resetFields(),this.clearSysInfo(),this.claearAddSbInfo()},handleSizeChange:function(e){this.pagesize=e},handleCurrentChange:function(e){this.currentPage=e},getYxsList(){this.$axios.get("/weixin-yxs/getAllYxs").then((e=>{const s=e.data;200==s.code&&(this.YxsList=s.data)}))},changeYxs(e){e.dwh?(this.YxsOption=e.dwmc,this.YxsId=e.dwh,this.YxsMc=e.dwmc,Loading.show(),this.getSysListById(e.dwh),Loading.hide()):G.z8.error("请选择学院")},getSysListById(e){this.$axios.get("/weixin-syszk/getById?id="+e).then((e=>{const s=e.data;200==s.code&&(this.SysList=s.data)}))},deleteSysById(e){this.$axios.post("/weixin-syszk/deleteById?id="+e).then((e=>{const s=e.data;200==s.code?(G.z8.success("删除成功"),Loading.show(),this.getSysListById(this.YxsId),Loading.hide()):G.z8.error("删除错误")}))},changeSysInfo(e){this.SysInfo=null,this.dialogVisible=!0,console.log(JSON.parse(JSON.stringify(e))),this.SysInfo=JSON.parse(JSON.stringify(e)),Loading.show(),this.devicelist(this.SysInfo.sysh),Loading.hide()},updateSysInfo(e){this.$refs[e].validate((e=>{e?this.$axios.post("/weixin-syszk/updateSysInfo",{sysh:this.SysInfo.sysh,sysmc:this.SysInfo.sysmc,sysmph:this.SysInfo.sysmph,capacity:this.SysInfo.capacity,systype:this.SysInfo.systype}).then((e=>{const s=e.data;200==s.code&&(G.z8.success("更新数据成功"),this.dialogVisible=!1,this.getSysListById(this.YxsId))})):G.z8.error("表单不合法！！")}))},addSysDialog(){if(!this.YxsId)return G.z8.error("请选择学院,如果旁边选择框没有选项,请刷新页面"),!1;this.addDialogVisible=!0},addSys(e){this.$refs[e].validate((e=>{e&&this.$axios.post("/weixin-syszk/addSys",{sysmc:this.addSysInfo.sysmc,sysmph:this.addSysInfo.sysmph,capacity:this.addSysInfo.capacity,systype:this.addSysInfo.systype,yxsh:this.YxsId,yxmc:this.YxsMc}).then((e=>{const s=e.data;200==s.code?(G.z8.success("添加成功"),Loading.show(),this.getSysListById(this.YxsId),Loading.hide(),this.addDialogVisible=!1):G.z8.error(s.msg)}))}))},uploadCSVFile(e){const s=e.file;let t=new FormData;t.append("file",s),t.append("YxsId",this.YxsId),t.append("YxsMc",this.YxsMc),console.log(t),this.$axios({url:"/weixin-syszk/addSYSList",method:"post",data:t,headers:{"Content-Type":"multipart/form-data"}}).then((e=>{const s=e.data;200==s.code?(G.z8.success("添加成功"),location.reload()):G.z8.error(s.msg)}))},addSb(){""!=this.SysInfo.sysh&&(this.addSbInfo.sysh=this.SysInfo.sysh,Loading.show(),this.addDevice(),Loading.hide(),this.claearAddSbInfo())},devicelist(e){this.$axios.post("/weixin-sbzk/deviceList",{sysh:e}).then((e=>{const s=e.data;200==s.code?this.sbList=s.data:G.z8.error("获取设备列表失败")}))},deleteDevice(e){this.$axios.post("/weixin-sbzk/deleteDevice",{sbh:e}).then((e=>{const s=e.data;200==s.code&&(this.devicelist(this.SysInfo.sysh),G.z8.success("删除成功"))}))},addDevice(){""!=this.addSbInfo.sbmc&&""!=this.addSbInfo.sysh&&""!=this.addSbInfo.sbzt?this.$axios.post("/weixin-sbzk/addDevice",this.addSbInfo).then((e=>{const s=e.data;200==s.code&&(G.z8.success("添加成功"),this.devicelist(this.SysInfo.sysh))})):G.z8.error("请填写设备信息")},tabsClick(e){}},computed:{getSysFilter(){return this.SysList.map((e=>(0==e.systype?e["state"]="开放":1==e.systype?e["state"]="禁用":e["state"]="报修",e))).filter((e=>!this.search||e.sysmc.includes(this.search.toLowerCase())||e.sysmph.includes(this.search.toLowerCase())))},sbTableInfo(){return this.sbList.map((e=>(e["state"]="0"==e.sbzt?"正常":"故障",e)))}}},ee=t(89);const se=(0,ee.Z)(X,[["render",Z],["__scopeId","data-v-793dac44"]]);var te=se},6809:function(e,s,t){t(1758)},7437:function(e,s,t){t(1758)},88:function(e,s,t){t(1758)},9910:function(e,s,t){t(1758),t(7195)},7219:function(e,s,t){t(1758)},7113:function(e,s,t){t(1758)},2064:function(e,s,t){t(1758)},172:function(e,s,t){t(1758)},3970:function(e,s,t){t(1758),t(6809),t(172),t(7195)},7960:function(e,s,t){t(1758)},7195:function(e,s,t){t(1758)},3069:function(e,s,t){t(1758),t(3877)},3855:function(e,s,t){t(1758),t(6962)},3429:function(e,s,t){t(1758)},451:function(e,s,t){t(1758)},3877:function(e,s,t){t(1758),t(172),t(1430),t(7960),t(451),t(6467)},9007:function(e,s,t){t(1758),t(88),t(1430)},6905:function(e,s,t){t(1758),t(88),t(1430),t(4566),t(451)}}]);
//# sourceMappingURL=772.085b3bc1.js.map