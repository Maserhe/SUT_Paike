"use strict";(self["webpackChunkpaike_sut"]=self["webpackChunkpaike_sut"]||[]).push([[278],{37278:function(e,n,o){o.r(n),o.d(n,{default:function(){return b}});o(62064),o(86809),o(44566),o(47113),o(172),o(28474);var t=o(67188),r=o(71267),a=o(19805),i=o(73060),s=o(41015),u=o(73396),l=o(49242),c=function(e){return(0,u.dD)("data-v-07dbfb97"),e=e(),(0,u.Cn)(),e},d={class:"login-container"},p=c((function(){return(0,u._)("head",null,[(0,u._)("meta",{name:"viewport",content:"width=device-width,initial-scale=1.0"})],-1)})),m=c((function(){return(0,u._)("div",{class:"title-container"},[(0,u._)("h3",{class:"title"},"实验室管理系统")],-1)})),f={class:"svg-container"},w={class:"svg-container"},g=(0,u.Uk)("登陆");function h(e,n,o,c,h,v){var y=(0,u.up)("i-user"),k=s.gn,_=i.EZ,T=t.nH,b=(0,u.up)("i-lock"),F=(0,u.up)("i-view"),W=a.Q0,C=r.mi,V=t.ly;return(0,u.wg)(),(0,u.iD)("div",d,[p,(0,u.Wm)(V,{ref:"loginForm",model:h.loginForm,rules:h.loginRules,class:"login-form",autocomplete:"on","label-position":"left"},{default:(0,u.w5)((function(){return[m,(0,u.Wm)(T,{prop:"username"},{default:(0,u.w5)((function(){return[(0,u._)("span",f,[(0,u.Wm)(k,null,{default:(0,u.w5)((function(){return[(0,u.Wm)(y)]})),_:1})]),(0,u.Wm)(_,{ref:"username",modelValue:h.loginForm.username,"onUpdate:modelValue":n[0]||(n[0]=function(e){return h.loginForm.username=e}),placeholder:"Username",name:"username",type:"text",tabindex:"1",autocomplete:"on"},null,8,["modelValue"])]})),_:1}),(0,u.Wm)(W,{modelValue:h.capsTooltip,"onUpdate:modelValue":n[4]||(n[4]=function(e){return h.capsTooltip=e}),content:"查看密码",placement:"right",manual:""},{default:(0,u.w5)((function(){return[(0,u.Wm)(T,{prop:"password"},{default:(0,u.w5)((function(){return[(0,u._)("span",w,[(0,u.Wm)(k,null,{default:(0,u.w5)((function(){return[(0,u.Wm)(b)]})),_:1})]),((0,u.wg)(),(0,u.j4)(_,{key:h.passwordType,ref:"password",modelValue:h.loginForm.password,"onUpdate:modelValue":n[1]||(n[1]=function(e){return h.loginForm.password=e}),type:h.passwordType,placeholder:"Password",name:"password",tabindex:"2",autocomplete:"on",onKeyup:[(0,l.D2)(v.checkCapslock,["native"]),(0,l.D2)(v.handleLogin,["enter","native"])],onBlur:n[2]||(n[2]=function(e){return h.capsTooltip=!1})},null,8,["modelValue","type","onKeyup"])),(0,u._)("span",{class:"show-pwd",onClick:n[3]||(n[3]=function(){return v.showPwd&&v.showPwd.apply(v,arguments)})},[(0,u.Wm)(k,{"icon-class":"password"===h.passwordType?"eye":"eye-open"},{default:(0,u.w5)((function(){return[(0,u.Wm)(F)]})),_:1},8,["icon-class"])])]})),_:1})]})),_:1},8,["modelValue"]),(0,u.Wm)(C,{loading:h.loading,type:"primary",style:{width:"100%","margin-bottom":"30px"},onClick:(0,l.iM)(v.handleLogin,["prevent"])},{default:(0,u.w5)((function(){return[g]})),_:1},8,["loading","onClick"])]})),_:1},8,["model","rules"])])}var v=o(85574),y=(o(77233),o(21703),o(41539),o(47941),o(12826)),k=(o(18192),{name:"Login",data:function(){var e=function(e,n,o){(0,y.CI)(n)?o():o(new Error("请输入正确的用户名"))},n=function(e,n,o){0==n.length?o(new Error("请输入正确的密码")):o()};return{loginType:1,loginForm:{username:"admin",password:"admin"},loginRules:{username:[{required:!0,trigger:"blur",validator:e}],password:[{required:!0,trigger:"blur",validator:n}]},passwordType:"password",capsTooltip:!1,loading:!1,showDialog:!1,redirect:void 0,otherQuery:{}}},mounted:function(){""===this.loginForm.username?this.$refs.username.focus():""===this.loginForm.password&&this.$refs.password.focus(),document.title="登陆"},methods:{checkCapslock:function(e){var n=e.key;this.capsTooltip=n&&1===n.length&&n>="A"&&n<="Z"},showPwd:function(){var e=this;"password"===this.passwordType?this.passwordType="":this.passwordType="password",this.$nextTick((function(){e.$refs.password.focus()}))},handleLogin:function(){var e=this;this.$refs.loginForm.validate((function(n){if(!n)return console.log("error submit!!"),!1;var o=e;e.loading=!0,e.$axios.post("/login",e.loginForm).then((function(e){var n=e.data;if(200==n.code){var t=e.data;e.headers["authorization"];localStorage.setItem("token",e.headers["authorization"]),o.$store.commit("SET_USERINFO",t.data),v.z8.success(t.msg),window.location.href="/"}else v.z8.error(n.msg)})).catch((function(n){e.loading=!1}))}))},getOtherQuery:function(e){return Object.keys(e).reduce((function(n,o){return"redirect"!==o&&(n[o]=e[o]),n}),{})}}}),_=o(40089);const T=(0,_.Z)(k,[["render",h],["__scopeId","data-v-07dbfb97"]]);var b=T},86809:function(e,n,o){o(11758)},47113:function(e,n,o){o(11758)},62064:function(e,n,o){o(11758)},172:function(e,n,o){o(11758)}}]);
//# sourceMappingURL=278-legacy.f007f6d6.js.map