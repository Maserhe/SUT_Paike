"use strict";(self["webpackChunkpaike_sut"]=self["webpackChunkpaike_sut"]||[]).push([[916],{86916:function(n,t,e){e.d(t,{Z:function(){return un}});e(67437),e(9910),e(86809),e(172),e(70451),e(33877),e(17960),e(67219);var i=e(4143),s=e(54827),l=e(71267),o=e(73060),u=e(76739),r=e(57927),a=e(61244),c=(e(47941),e(69600),e(73396)),h=e(87139),d=function(n){return(0,c.dD)("data-v-76524c57"),n=n(),(0,c.Cn)(),n},f=d((function(){return(0,c._)("h3",null,"实验室课表查询",-1)})),g=d((function(){return(0,c._)("br",null,null,-1)})),p={style:{display:"flex","align-items":"center"}},m=d((function(){return(0,c._)("p",{style:{"margin-right":"1rem"}},"学期",-1)})),y=d((function(){return(0,c._)("p",{style:{"margin-right":"1rem"}},"学院",-1)})),x=d((function(){return(0,c._)("p",{style:{"margin-right":"1rem"}},"机房",-1)})),k=d((function(){return(0,c._)("p",{style:{"margin-right":"1rem"}},"周次",-1)})),b=d((function(){return(0,c._)("br",null,null,-1)})),w={class:"table-wrapper"},O={class:"tabel-container"},_={style:{"font-size":"12px",background:"#d4f7fd","word-wrap":"break-word","word-break":"break-all"}},v=["onClick"],j=d((function(){return(0,c._)("br",null,null,-1)})),S=d((function(){return(0,c._)("br",null,null,-1)})),L=d((function(){return(0,c._)("br",null,null,-1)})),q=["onClick"],B=d((function(){return(0,c._)("br",null,null,-1)})),z=d((function(){return(0,c._)("br",null,null,-1)})),Y=(0,c.Uk)(" 点击排课 "),K=[B,z,Y],V={key:2,class:"paike"},X=d((function(){return(0,c._)("br",null,null,-1)})),C=d((function(){return(0,c._)("br",null,null,-1)})),U=d((function(){return(0,c._)("br",null,null,-1)})),D=d((function(){return(0,c._)("br",null,null,-1)})),H=d((function(){return(0,c._)("br",null,null,-1)})),Z=(0,c.Uk)(" 查询老师的课程 班级的 年级 查询教师上课的班级 学年学期 + 教师 id "),W=d((function(){return(0,c._)("br",null,null,-1)})),I={style:{display:"flex","align-items":"center"}},A=d((function(){return(0,c._)("p",{style:{"margin-right":"1rem"}},"选择课程",-1)})),J=d((function(){return(0,c._)("br",null,null,-1)})),N={style:{display:"flex","align-items":"center"}},T=d((function(){return(0,c._)("p",{style:{"margin-right":"1rem"}},"选择班级",-1)})),$=d((function(){return(0,c._)("br",null,null,-1)})),P={style:{display:"flex","align-items":"center"}},M=d((function(){return(0,c._)("p",{style:{"margin-right":"1rem"}},"备注说明",-1)})),R=d((function(){return(0,c._)("br",null,null,-1)})),E={style:{"text-align":"center"}},F=(0,c.Uk)("确定");function G(n,t,e,d,B,z){var Y=a.os,G=r.BT,Q=r.km,nn=u.Mr,tn=o.EZ,en=l.mi,sn=s.d0,ln=i.Kf;return(0,c.wg)(),(0,c.j4)(ln,{class:"account-container"},{default:(0,c.w5)((function(){return[f,(0,c.Wm)(Y),g,(0,c.Wm)(nn,{always:!0},{default:(0,c.w5)((function(){return[(0,c._)("div",p,[m,(0,c.Wm)(Q,{modelValue:d.XnxqOption,"onUpdate:modelValue":t[0]||(t[0]=function(n){return d.XnxqOption=n}),placeholder:"选择学期",onChange:z.changeXnxq,style:{"margin-right":"1rem"}},{default:(0,c.w5)((function(){return[((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(B.XnxqList,(function(n,t){return(0,c.wg)(),(0,c.j4)(G,{key:t,label:n.qsrq,value:n},null,8,["label","value"])})),128))]})),_:1},8,["modelValue","onChange"]),y,(0,c.Wm)(Q,{modelValue:d.YxsOption,"onUpdate:modelValue":t[1]||(t[1]=function(n){return d.YxsOption=n}),placeholder:"选择学院",onChange:z.changeYxs,style:{"margin-right":"1rem"}},{default:(0,c.w5)((function(){return[((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(B.YxsList,(function(n,t){return(0,c.wg)(),(0,c.j4)(G,{key:t,label:n.dwmc,value:n},null,8,["label","value"])})),128))]})),_:1},8,["modelValue","onChange"]),x,(0,c.Wm)(Q,{modelValue:d.SysOption,"onUpdate:modelValue":t[2]||(t[2]=function(n){return d.SysOption=n}),placeholder:"选择机房",onChange:z.changeSys,style:{"margin-right":"1rem"}},{default:(0,c.w5)((function(){return[((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(B.SysList,(function(n,t){return(0,c.wg)(),(0,c.j4)(G,{key:t,label:n.sysmph,value:n},null,8,["label","value"])})),128))]})),_:1},8,["modelValue","onChange"]),k,(0,c.Wm)(Q,{modelValue:d.ZcOption,"onUpdate:modelValue":t[3]||(t[3]=function(n){return d.ZcOption=n}),placeholder:"选择周次",onChange:z.changeZc,style:{"margin-right":"1rem"}},{default:(0,c.w5)((function(){return[((0,c.wg)(),(0,c.iD)(c.HY,null,(0,c.Ko)(20,(function(n,t){return(0,c.Wm)(G,{key:t,label:"第"+n+"周",value:n},null,8,["label","value"])})),64))]})),_:1},8,["modelValue","onChange"])])]})),_:1}),b,(0,c._)("div",w,[(0,c._)("div",O,[(0,c._)("table",null,[(0,c._)("thead",null,[(0,c._)("tr",null,[((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(B.sections,(function(n,t){return(0,c.wg)(),(0,c.iD)("th",{key:t},(0,h.zw)(n),1)})),128))])]),(0,c._)("tbody",null,[((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(B.weeks,(function(n,t){return(0,c.wg)(),(0,c.iD)("tr",{key:t},[(0,c._)("td",_,(0,h.zw)(n),1),((0,c.wg)(),(0,c.iD)(c.HY,null,(0,c.Ko)(5,(function(n){return(0,c._)("td",{key:n},[B.courses[t][n-1]&&Object.keys(B.courses[t][n-1]).length>0?((0,c.wg)(),(0,c.iD)("div",{key:0,style:"",onClick:function(e){return z.toScanDetail(B.courses[t][n-1])}},[(0,c.Uk)(" 教师: "+(0,h.zw)(B.courses[t][n-1].jgmc)+" ",1),j,(0,c.Uk)(" 课程: "+(0,h.zw)(B.courses[t][n-1].kcmc)+" ",1),S,(0,c.Uk)(" 班级: "+(0,h.zw)(B.courses[t][n-1].bjmcList.join("、"))+" ",1),L,(0,c.Uk)(" 备注: "+(0,h.zw)(B.courses[t][n-1].bz),1)],8,v)):1==B.userInfo.useraccounttype?((0,c.wg)(),(0,c.iD)("div",{key:1,class:"paike",onClick:function(e){return z.paikeButton(t,n)}},K,8,q)):((0,c.wg)(),(0,c.iD)("div",V))])})),64))])})),128))])])])]),(0,c.Wm)(sn,{modelValue:d.dialogVisible,"onUpdate:modelValue":t[7]||(t[7]=function(n){return d.dialogVisible=n}),title:"排课管理",width:"80%","before-close":d.handleClose},{default:(0,c.w5)((function(){return[(0,c.Uk)(" 学期: "+(0,h.zw)(B.Xnxq)+" ",1),X,(0,c.Uk)(" 学院: "+(0,h.zw)(B.Yxs)+" ",1),C,(0,c.Uk)(" 实验室: "+(0,h.zw)(B.Sys)+" ",1),U,(0,c.Uk)(" 周次: "+(0,h.zw)(d.ZcOption)+" ",1),D,(0,c.Uk)(" 天: "+(0,h.zw)(B.thatDay)+" ",1),H,(0,c.Uk)(" 节: "+(0,h.zw)(B.thatSection)+" ",1),(0,c.Wm)(Y),Z,(0,c.Wm)(Y),W,(0,c._)("div",I,[A,(0,c.Wm)(Q,{modelValue:d.KcOption,"onUpdate:modelValue":t[4]||(t[4]=function(n){return d.KcOption=n}),placeholder:"选择课程",onChange:z.changeKc,style:{"margin-right":"1rem"}},{default:(0,c.w5)((function(){return[((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(z.getKcList,(function(n,t){return(0,c.wg)(),(0,c.j4)(G,{key:t,label:n,value:n},null,8,["label","value"])})),128))]})),_:1},8,["modelValue","onChange"])]),J,(0,c._)("div",N,[T,(0,c.Wm)(Q,{modelValue:d.BjOption,"onUpdate:modelValue":t[5]||(t[5]=function(n){return d.BjOption=n}),multiple:"",placeholder:"选择班级",onChange:z.changeBj,style:{"margin-right":"1rem"}},{default:(0,c.w5)((function(){return[((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(B.Bjlist,(function(n,t){return(0,c.wg)(),(0,c.j4)(G,{key:n.bh,label:n.bjmc,value:n.bh},null,8,["label","value"])})),128))]})),_:1},8,["modelValue","onChange"])]),$,(0,c._)("div",P,[M,(0,c.Wm)(tn,{style:{"margin-right":"1rem"},modelValue:B.bz,"onUpdate:modelValue":t[6]||(t[6]=function(n){return B.bz=n}),autosize:{minRows:2,maxRows:4},type:"textarea",placeholder:"非必需输入"},null,8,["modelValue"])]),R,(0,c._)("div",E,[(0,c.Wm)(en,{size:"large",type:"primary",style:{width:"6rem"},onClick:z.addPaikeButton},{default:(0,c.w5)((function(){return[F]})),_:1},8,["onClick"])])]})),_:1},8,["modelValue","before-close"])]})),_:1})}var Q=e(61897),nn=(e(93970),e(38862),e(57327),e(41539),e(92222),e(21249),e(85574)),tn=e(12826),en=e(44870),sn={setup:function(){var n=(0,en.iH)(!1),t=(0,en.iH)([]),e=(0,en.iH)([]),i=(0,en.iH)([]),s=(0,en.iH)([]),l=(0,en.iH)([]),o=(0,en.iH)([]),u=function(n){Q.T.confirm("确定关闭对话框?","温馨提示",{type:"info",center:!0}).then((function(){n()}))};return{dialogVisible:n,handleClose:u,XnxqOption:i,YxsOption:s,SysOption:l,ZcOption:o,KcOption:t,BjOption:e}},name:"SearchLabsSchedule",data:function(){return{userInfo:null,XnxqList:[],Xnxq:{},YxsList:[],Yxs:{},SysList:[],Sys:{},thatDay:"",thatSection:"",bz:"",sections:["周次\\节","1-2节","3-4节","5-6节","7-8节","9-10节"],weeks:["周一","周二","周三","周四","周五","周六","周日"],courses:[[],[],[],[],[],[],[]],Bjlist:[],KcAndBjList:[]}},created:function(){var n=sessionStorage.getItem("userInfo");n?this.userInfo=JSON.parse((0,tn.Ne)(n)):this.$router.push("/login"),this.getXnxqList()},methods:{initcourse:function(){this.courses=[[],[],[],[],[],[],[]]},getXnxqList:function(){var n=this;this.$axios.get("/weixin-ggjxzl/getXnxqList").then((function(t){var e=t.data;200==e.code?n.XnxqList=e.data:nn.z8.error("获取学年数据错误")}))},changeXnxq:function(){this.Xnxq=JSON.parse(JSON.stringify(this.XnxqOption)),this.XnxqOption=this.Xnxq.qsrq,this.initcourse(),this.YxsList.length||this.getYxsList()},getYxsList:function(){var n=this;this.$axios.get("/weixin-yxs/getAllYxs").then((function(t){var e=t.data;200==e.code&&(n.YxsList=e.data)}))},changeYxs:function(){this.initcourse(),this.Yxs=JSON.parse(JSON.stringify(this.YxsOption)),this.YxsOption=this.Yxs.dwmc,this.SysOption="",this.getSysListById(this.Yxs.dwh)},changeSys:function(){this.initcourse(),this.Sys=JSON.parse(JSON.stringify(this.SysOption)),this.SysOption=this.Sys.sysmph,this.ZcOption="",this.KcAndBjList.length||this.getKcAndBjList(this.Xnxq.xnxqh,this.userInfo.useraccount)},changeZc:function(){console.log(this.ZcOption),this.getSysPaikeTable(this.Xnxq.xnxqh,this.ZcOption,this.Sys.sysh)},changeKc:function(){var n=this,t=this.KcAndBjList.filter((function(t){return t.kcmc==n.KcOption}));1==t.length&&(this.Bjlist=t[0].classList)},changeBj:function(n){console.log(this.BjOption),console.log(n)},getKcAndBjList:function(n,t){var e=this;this.$axios.post("/weixin-jskb/getjskb",{Xnxqh:n,Jgh:t}).then((function(n){var t=n.data;200==t.code&&(e.KcAndBjList=t.data)}))},getSysListById:function(n){var t=this;this.$axios.get("/weixin-syszk/getById?id="+n).then((function(n){var e=n.data;200==e.code&&(t.SysList=e.data)}))},getSysPaikeTable:function(n,t,e){var i=this;this.$axios.post("/weixin-sysxk/sysxkTable",{xnxq01id:this.Xnxq.xnxqh,kkzc:t,sysh:e}).then((function(n){var t=n.data;200==t.code&&(i.courses=t.data)}))},toScanDetail:function(n,t){var e='<div style="width:200px;text-align:left!important;margin:0 auto;color:#999;font-size:14px">学院：'.concat(this.Yxs.dwmc,"<br/>地点：").concat(n.sysmph,"<br/>课程：").concat(n.kcmc,"<br/>老师：").concat(n.jgmc,"<br/>班级：").concat(n.bjmcList.join("、"),"</div>");this.Yxs.dwmc&&(0,nn.z8)({type:"success",dangerouslyUseHTMLString:!0,message:e})},paikeButton:function(n,t){this.XnxqOption&&this.YxsOption&&this.SysOption&&this.ZcOption&&this.KcAndBjList?(this.thatDay=n+1,this.thatSection=t,this.bz="",this.KcOption="",this.BjOption="",this.Bjlist=[],this.dialogVisible=!0):nn.z8.error("请完成上面的选择,并点击查询")},addPaikeButton:function(){var n=this;this.KcOption&&this.BjOption&&0!=this.BjOption.length?(this.$axios.post("/weixin-sysxk/addSysxk",{xnxq01id:this.Xnxq.xnxqh,kkzc:this.ZcOption,kksjmx:this.thatDay+"-"+this.thatSection,kcmc:this.KcOption,jgmc:this.userInfo.userrealname,sysh:this.Sys.sysh,sysmph:this.Sys.sysmph,yxsh:this.Yxs.dwh,bz:this.bz,jg0101id:this.userInfo.useraccount,classList:this.getBjOptionList}).then((function(t){var e=t.data;200==e.code&&(nn.z8.success("添加成功"),n.getSysPaikeTable(n.Xnxq.xnxqh,n.ZcOption,n.Sys.sysh),n.dialogVisible=!1)})),console.log(this.getBjOptionList)):nn.z8.error("完成课程、班级选择")}},computed:{getKcList:function(){return this.KcAndBjList.map((function(n){return n.kcmc}))},getBjOptionList:function(){var n=this;return this.Bjlist.filter((function(t){return n.BjOption.some((function(n){return n==t.bh}))}))}}},ln=e(40089);const on=(0,ln.Z)(sn,[["render",G],["__scopeId","data-v-76524c57"]]);var un=on},86809:function(n,t,e){e(11758)},67437:function(n,t,e){e(11758)},9910:function(n,t,e){e(11758),e(47195)},67219:function(n,t,e){e(11758)},172:function(n,t,e){e(11758)},93970:function(n,t,e){e(11758),e(86809),e(172),e(47195)},17960:function(n,t,e){e(11758)},47195:function(n,t,e){e(11758)},70451:function(n,t,e){e(11758)},33877:function(n,t,e){e(11758),e(172),e(31430),e(17960),e(70451),e(86467)}}]);
//# sourceMappingURL=916-legacy.c161791e.js.map