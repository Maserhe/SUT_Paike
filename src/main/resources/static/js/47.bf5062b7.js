"use strict";(self["webpackChunkpaike_sut"]=self["webpackChunkpaike_sut"]||[]).push([[47],{7047:function(e,s,t){t.r(s),t.d(s,{default:function(){return O}});t(3852),t(1758),t(8474),t(9910),t(2064),t(7113),t(6905),t(3069),t(3855),t(172),t(9007),t(451),t(6809),t(3877),t(7960),t(7219);var a=t(4143),l=t(1853),o=t(9523),i=t(1015),n=t(4827),d=t(7188),r=t(3209),u=t(426),m=t(2563),c=t(3060),y=t(6739),h=t(1267),f=t(7927),p=t(1244),g=t(3396);const w=(0,g._)("h3",null,"实验室管理",-1),S={style:{display:"flex","align-items":"center"}},x=(0,g._)("p",{style:{"margin-right":"1rem"}},"学院",-1),I=(0,g.Uk)("添加实验室"),_=(0,g._)("h1",null,"hahaha",-1),W=(0,g.Uk)("修改"),C=(0,g.Uk)("删除"),V=(0,g.Uk)("更新"),b=(0,g.Uk)("重置"),k=(0,g.Uk)("添加"),Y=(0,g.Uk)("重置"),z={style:{"text-align":"center"}},v=(0,g._)("div",{class:"el-upload__text"},[(0,g.Uk)("拖拽文件到这或者"),(0,g._)("em",null,"点击上传")],-1),L=(0,g._)("div",{class:"el-upload__tip"},"需要上传指定格式的csv文件,请先下载模版,仿照着写",-1),U=(0,g._)("a",{href:"/addLabs.csv",download:"addLabs.csv"},"模版下载",-1);function B(e,s,t,B,F,$){const D=p.os,R=f.BT,q=f.km,M=h.mi,O=y.Mr,H=r.$Y,N=c.EZ,P=m.i1,T=u.R,j=r.eI,J=d.nH,K=d.ly,Z=n.d0,A=l.p8,E=(0,g.up)("i-upload-filled"),G=i.gn,Q=o.LW,X=l.Ub,ee=a.Kf;return(0,g.wg)(),(0,g.j4)(ee,{class:"account-container"},{default:(0,g.w5)((()=>[w,(0,g.Wm)(D),(0,g.Wm)(O,null,{default:(0,g.w5)((()=>[(0,g._)("div",S,[x,(0,g.Wm)(q,{modelValue:F.YxsOption,"onUpdate:modelValue":s[0]||(s[0]=e=>F.YxsOption=e),placeholder:"Select",onChange:$.changeYxs,style:{"margin-right":"1rem"}},{default:(0,g.w5)((()=>[((0,g.wg)(!0),(0,g.iD)(g.HY,null,(0,g.Ko)(F.YxsList,((e,s)=>((0,g.wg)(),(0,g.j4)(R,{key:s,label:e.dwmc,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"]),(0,g.Wm)(M,{type:"primary",style:{display:"inline-block"},onClick:$.addSysDialog},{default:(0,g.w5)((()=>[I])),_:1},8,["onClick"])])])),_:1}),(0,g.Wm)(j,{data:$.getSysFilter.slice((F.currentPage-1)*F.pagesize,F.currentPage*F.pagesize),style:{width:"100%"}},{tableHead:(0,g.w5)((()=>[_])),append:(0,g.w5)((()=>[(0,g.Wm)(T,{onSizeChange:$.handleSizeChange,onCurrentChange:$.handleCurrentChange,"current-page":F.currentPage,"page-sizes":[5,10,20,40],"page-size":F.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:$.getSysFilter.length},null,8,["onSizeChange","onCurrentChange","current-page","page-size","total"])])),default:(0,g.w5)((()=>[(0,g.Wm)(H,{type:"index"}),(0,g.Wm)(H,{label:"实验名称",prop:"sysmc",width:"220rem"}),(0,g.Wm)(H,{label:"门牌号",prop:"sysmph"}),(0,g.Wm)(H,{label:"操作",width:"300rem"},{header:(0,g.w5)((()=>[(0,g.Wm)(N,{modelValue:F.search,"onUpdate:modelValue":s[1]||(s[1]=e=>F.search=e),placeholder:"输入实验室门牌号、名称搜索"},null,8,["modelValue"])])),default:(0,g.w5)((e=>[(0,g.Wm)(M,{type:"primary",onClick:s=>$.changeSysInfo(e.row)},{default:(0,g.w5)((()=>[W])),_:2},1032,["onClick"]),(0,g.Wm)(P,{title:"确定要删除该实验室?",onConfirm:s=>$.deleteSysById(e.row.sysh)},{reference:(0,g.w5)((()=>[(0,g.Wm)(M,{type:"danger"},{default:(0,g.w5)((()=>[C])),_:1})])),_:2},1032,["onConfirm"])])),_:1})])),_:1},8,["data"]),(0,g.Wm)(Z,{modelValue:B.dialogVisible,"onUpdate:modelValue":s[6]||(s[6]=e=>B.dialogVisible=e),title:"实验室信息",width:"80%","before-close":B.handleClose},{default:(0,g.w5)((()=>[(0,g.Wm)(K,{ref:"sysInfoRef",model:F.SysInfo,"label-position":"top","label-width":"30rem"},{default:(0,g.w5)((()=>[(0,g.Wm)(J,{label:"实验室的名称",prop:"sysmc",rules:[{required:!0,message:"非必需填写,例如: 人工智能实验室, 不填写的话默认名称: 机房"}]},{default:(0,g.w5)((()=>[(0,g.Wm)(N,{modelValue:F.SysInfo.sysmc,"onUpdate:modelValue":s[2]||(s[2]=e=>F.SysInfo.sysmc=e),type:"text",autocomplete:"off"},null,8,["modelValue"])])),_:1}),(0,g.Wm)(J,{label:"实验室门牌号",prop:"sysmph",rules:[{required:!0,message:"必需填写,表示实验室位置,例如: 205"}]},{default:(0,g.w5)((()=>[(0,g.Wm)(N,{modelValue:F.SysInfo.sysmph,"onUpdate:modelValue":s[3]||(s[3]=e=>F.SysInfo.sysmph=e),type:"text",autocomplete:"off"},null,8,["modelValue"])])),_:1}),(0,g.Wm)(J,null,{default:(0,g.w5)((()=>[(0,g.Wm)(M,{type:"primary",onClick:s[4]||(s[4]=e=>$.updateSysInfo("sysInfoRef"))},{default:(0,g.w5)((()=>[V])),_:1}),(0,g.Wm)(M,{onClick:s[5]||(s[5]=e=>$.resetForm("sysInfoRef"))},{default:(0,g.w5)((()=>[b])),_:1})])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue","before-close"]),(0,g.Wm)(Z,{modelValue:B.addDialogVisible,"onUpdate:modelValue":s[12]||(s[12]=e=>B.addDialogVisible=e),title:"添加实验室",width:"80%","before-close":B.handleClose},{default:(0,g.w5)((()=>[(0,g.Wm)(X,{modelValue:F.activeName,"onUpdate:modelValue":s[11]||(s[11]=e=>F.activeName=e),onTabClick:$.handleClick},{default:(0,g.w5)((()=>[(0,g.Wm)(A,{label:"单个添加",name:"first"},{default:(0,g.w5)((()=>[(0,g.Wm)(K,{ref:"addSysInfoRef",model:F.addSysInfo,"label-position":"top","label-width":"30rem"},{default:(0,g.w5)((()=>[(0,g.Wm)(J,{label:"实验室的名称",prop:"sysmc",rules:[{required:!0,message:"非必需填写,例如: 人工智能实验室, 不填写的话默认名称: 机房"}]},{default:(0,g.w5)((()=>[(0,g.Wm)(N,{modelValue:F.addSysInfo.sysmc,"onUpdate:modelValue":s[7]||(s[7]=e=>F.addSysInfo.sysmc=e),type:"text",autocomplete:"off"},null,8,["modelValue"])])),_:1}),(0,g.Wm)(J,{label:"实验室门牌号",prop:"sysmph",rules:[{required:!0,message:"必需填写,表示实验室位置,例如: 205"}]},{default:(0,g.w5)((()=>[(0,g.Wm)(N,{modelValue:F.addSysInfo.sysmph,"onUpdate:modelValue":s[8]||(s[8]=e=>F.addSysInfo.sysmph=e),type:"text",autocomplete:"off"},null,8,["modelValue"])])),_:1}),(0,g.Wm)(J,null,{default:(0,g.w5)((()=>[(0,g.Wm)(M,{type:"primary",onClick:s[9]||(s[9]=e=>$.addSys("addSysInfoRef"))},{default:(0,g.w5)((()=>[k])),_:1}),(0,g.Wm)(M,{onClick:s[10]||(s[10]=e=>$.resetForm("addSysInfoRef"))},{default:(0,g.w5)((()=>[Y])),_:1})])),_:1})])),_:1},8,["model"])])),_:1}),(0,g.Wm)(A,{label:"批量添加",name:"second"},{default:(0,g.w5)((()=>[(0,g._)("div",z,[(0,g.Wm)(Q,{drag:"",action:"","http-request":$.uploadCSVFile,limit:1,accept:".csv"},{tip:(0,g.w5)((()=>[L])),default:(0,g.w5)((()=>[(0,g.Wm)(G,{class:"el-icon--upload"},{default:(0,g.w5)((()=>[(0,g.Wm)(E)])),_:1}),v])),_:1},8,["http-request"]),(0,g.Wm)(M,{type:"primary"},{default:(0,g.w5)((()=>[U])),_:1})])])),_:1})])),_:1},8,["modelValue","onTabClick"])])),_:1},8,["modelValue","before-close"])])),_:1})}var F=t(1897),$=t(5574),D=(t(3970),t(7233),t(4870)),R={setup(){const e=(0,D.iH)(!1),s=(0,D.iH)(!1),t=e=>{F.T.confirm("确定关闭对话框?","温馨提示",{type:"info",center:!0}).then((()=>{e()}))};return{dialogVisible:e,handleClose:t,addDialogVisible:s}},data(){return{currentPage:1,pagesize:10,search:"",YxsList:[],YxsOption:"选择学院",YxsId:"",YxsMc:"",SysList:[],SysInfo:{sysh:"",sysmc:"",sysmph:"",yxsh:"",yxmc:""},activeName:"first",addSysInfo:{sysmc:"",sysmph:""}}},created(){this.getYxsList()},methods:{handleClick(e,s){console.log(e,s)},clearSysInfo(){this.SysInfo={sysh:"",sysmc:"",sysmph:"",yxsh:"",yxmc:""}},resetForm(e){this.$refs[e].resetFields(),this.clearSysInfo()},handleSizeChange:function(e){this.pagesize=e},handleCurrentChange:function(e){this.currentPage=e},getYxsList(){this.$axios.get("/weixin-yxs/getAllYxs").then((e=>{const s=e.data;200==s.code&&(this.YxsList=s.data)}))},changeYxs(e){e.dwh?(this.YxsOption=e.dwmc,this.YxsId=e.dwh,this.YxsMc=e.dwmc,this.getSysListById(e.dwh)):$.z8.error("请选择学院")},getSysListById(e){this.$axios.get("/weixin-syszk/getById?id="+e).then((e=>{const s=e.data;200==s.code&&(this.SysList=s.data)}))},deleteSysById(e){this.$axios.post("/weixin-syszk/deleteById?id="+e).then((e=>{const s=e.data;200==s.code?($.z8.success("删除成功"),this.getSysListById(this.YxsId)):$.z8.error("删除错误")}))},changeSysInfo(e){this.SysInfo=null,this.dialogVisible=!0,this.SysInfo=JSON.parse(JSON.stringify(e))},updateSysInfo(e){this.$refs[e].validate((e=>{e?this.$axios.post("/weixin-syszk/updateSysInfo",{sysh:this.SysInfo.sysh,sysmc:this.SysInfo.sysmc,sysmph:this.SysInfo.sysmph}).then((e=>{const s=e.data;200==s.code&&($.z8.success("更新数据成功"),this.getSysListById(this.YxsId))})):$.z8.error("表单不合法！！")}))},addSysDialog(){if(!this.YxsId)return $.z8.error("请选择学院,如果旁边选择框没有选项,请刷新页面"),!1;this.addDialogVisible=!0},addSys(e){this.$refs[e].validate((e=>{e&&this.$axios.post("/weixin-syszk/addSys",{sysmc:this.addSysInfo.sysmc,sysmph:this.addSysInfo.sysmph,yxsh:this.YxsId,yxmc:this.YxsMc}).then((e=>{const s=e.data;200==s.code?($.z8.success("添加成功"),this.getSysListById(this.YxsId)):$.z8.error(s.msg)}))}))},uploadCSVFile(e){const s=e.file;let t=new FormData;t.append("file",s),t.append("YxsId",this.YxsId),t.append("YxsMc",this.YxsMc),console.log(t),this.$axios({url:"/weixin-syszk/addSYSList",method:"post",data:t,headers:{"Content-Type":"multipart/form-data"}}).then((e=>{const s=e.data;200==s.code?($.z8.success("添加成功"),location.reload()):$.z8.error(s.msg)}))}},computed:{getSysFilter(){return this.SysList.filter((e=>!this.search||e.sysmc.includes(this.search.toLowerCase())||e.sysmph.includes(this.search.toLowerCase())))}}},q=t(89);const M=(0,q.Z)(R,[["render",B]]);var O=M},6809:function(e,s,t){t(1758)},3852:function(e,s,t){t(1758)},88:function(e,s,t){t(1758)},9910:function(e,s,t){t(1758),t(7195)},7219:function(e,s,t){t(1758)},7113:function(e,s,t){t(1758)},2064:function(e,s,t){t(1758)},172:function(e,s,t){t(1758)},3970:function(e,s,t){t(1758),t(6809),t(172),t(7195)},7960:function(e,s,t){t(1758)},7195:function(e,s,t){t(1758)},3069:function(e,s,t){t(1758),t(3877)},3855:function(e,s,t){t(1758),t(6962)},451:function(e,s,t){t(1758)},3877:function(e,s,t){t(1758),t(172),t(1430),t(7960),t(451),t(6467)},9007:function(e,s,t){t(1758),t(88),t(1430)},6905:function(e,s,t){t(1758),t(88),t(1430),t(4566),t(451)}}]);
//# sourceMappingURL=47.bf5062b7.js.map