"use strict";(self["webpackChunkpaike_sut"]=self["webpackChunkpaike_sut"]||[]).push([[916],{9690:function(t,e,s){s.d(e,{Z:function(){return at}});s(3852),s(9910),s(6809),s(172),s(451),s(3877),s(7960),s(7219);var i=s(4143),n=s(4827),l=s(1267),a=s(3060),o=s(6739),h=s(7927),c=s(1244),r=s(3396),u=s(7139);const d=t=>((0,r.dD)("data-v-76524c57"),t=t(),(0,r.Cn)(),t),g=d((()=>(0,r._)("h3",null,"实验室课表查询",-1))),p=d((()=>(0,r._)("br",null,null,-1))),m={style:{display:"flex","align-items":"center"}},y=d((()=>(0,r._)("p",{style:{"margin-right":"1rem"}},"学期",-1))),x=d((()=>(0,r._)("p",{style:{"margin-right":"1rem"}},"学院",-1))),k=d((()=>(0,r._)("p",{style:{"margin-right":"1rem"}},"机房",-1))),b=d((()=>(0,r._)("p",{style:{"margin-right":"1rem"}},"周次",-1))),w=d((()=>(0,r._)("br",null,null,-1))),O={class:"table-wrapper"},f={class:"tabel-container"},_={style:{"font-size":"12px",background:"#d4f7fd","word-wrap":"break-word","word-break":"break-all"}},j=["onClick"],S=d((()=>(0,r._)("br",null,null,-1))),L=d((()=>(0,r._)("br",null,null,-1))),q=d((()=>(0,r._)("br",null,null,-1))),B=["onClick"],z=d((()=>(0,r._)("br",null,null,-1))),Y=d((()=>(0,r._)("br",null,null,-1))),v=(0,r.Uk)(" 点击排课 "),K=[z,Y,v],V={key:2,class:"paike"},X=d((()=>(0,r._)("br",null,null,-1))),C=d((()=>(0,r._)("br",null,null,-1))),U=d((()=>(0,r._)("br",null,null,-1))),D=d((()=>(0,r._)("br",null,null,-1))),H=d((()=>(0,r._)("br",null,null,-1))),Z=(0,r.Uk)(" 查询老师的课程 班级的 年级 查询教师上课的班级 学年学期 + 教师 id "),W=d((()=>(0,r._)("br",null,null,-1))),I={style:{display:"flex","align-items":"center"}},$=d((()=>(0,r._)("p",{style:{"margin-right":"1rem"}},"选择课程",-1))),A=d((()=>(0,r._)("br",null,null,-1))),J={style:{display:"flex","align-items":"center"}},N=d((()=>(0,r._)("p",{style:{"margin-right":"1rem"}},"选择班级",-1))),T=d((()=>(0,r._)("br",null,null,-1))),P={style:{display:"flex","align-items":"center"}},M=d((()=>(0,r._)("p",{style:{"margin-right":"1rem"}},"备注说明",-1))),R=d((()=>(0,r._)("br",null,null,-1))),E={style:{"text-align":"center"}},F=(0,r.Uk)("确定");function G(t,e,s,d,z,Y){const v=c.os,G=h.BT,Q=h.km,tt=o.Mr,et=a.EZ,st=l.mi,it=n.d0,nt=i.Kf;return(0,r.wg)(),(0,r.j4)(nt,{class:"account-container"},{default:(0,r.w5)((()=>[g,(0,r.Wm)(v),p,(0,r.Wm)(tt,{always:!0},{default:(0,r.w5)((()=>[(0,r._)("div",m,[y,(0,r.Wm)(Q,{modelValue:d.XnxqOption,"onUpdate:modelValue":e[0]||(e[0]=t=>d.XnxqOption=t),placeholder:"选择学期",onChange:Y.changeXnxq,style:{"margin-right":"1rem"}},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(z.XnxqList,((t,e)=>((0,r.wg)(),(0,r.j4)(G,{key:e,label:t.qsrq,value:t},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"]),x,(0,r.Wm)(Q,{modelValue:d.YxsOption,"onUpdate:modelValue":e[1]||(e[1]=t=>d.YxsOption=t),placeholder:"选择学院",onChange:Y.changeYxs,style:{"margin-right":"1rem"}},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(z.YxsList,((t,e)=>((0,r.wg)(),(0,r.j4)(G,{key:e,label:t.dwmc,value:t},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"]),k,(0,r.Wm)(Q,{modelValue:d.SysOption,"onUpdate:modelValue":e[2]||(e[2]=t=>d.SysOption=t),placeholder:"选择机房",onChange:Y.changeSys,style:{"margin-right":"1rem"}},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(z.SysList,((t,e)=>((0,r.wg)(),(0,r.j4)(G,{key:e,label:t.sysmph,value:t},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"]),b,(0,r.Wm)(Q,{modelValue:d.ZcOption,"onUpdate:modelValue":e[3]||(e[3]=t=>d.ZcOption=t),placeholder:"选择周次",onChange:Y.changeZc,style:{"margin-right":"1rem"}},{default:(0,r.w5)((()=>[((0,r.wg)(),(0,r.iD)(r.HY,null,(0,r.Ko)(20,((t,e)=>(0,r.Wm)(G,{key:e,label:"第"+t+"周",value:t},null,8,["label","value"]))),64))])),_:1},8,["modelValue","onChange"])])])),_:1}),w,(0,r._)("div",O,[(0,r._)("div",f,[(0,r._)("table",null,[(0,r._)("thead",null,[(0,r._)("tr",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(z.sections,((t,e)=>((0,r.wg)(),(0,r.iD)("th",{key:e},(0,u.zw)(t),1)))),128))])]),(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(z.weeks,((t,e)=>((0,r.wg)(),(0,r.iD)("tr",{key:e},[(0,r._)("td",_,(0,u.zw)(t),1),((0,r.wg)(),(0,r.iD)(r.HY,null,(0,r.Ko)(5,(t=>(0,r._)("td",{key:t},[z.courses[e][t-1]&&Object.keys(z.courses[e][t-1]).length>0?((0,r.wg)(),(0,r.iD)("div",{key:0,style:"",onClick:s=>Y.toScanDetail(z.courses[e][t-1])},[(0,r.Uk)(" 教师: "+(0,u.zw)(z.courses[e][t-1].jgmc)+" ",1),S,(0,r.Uk)(" 课程: "+(0,u.zw)(z.courses[e][t-1].kcmc)+" ",1),L,(0,r.Uk)(" 班级: "+(0,u.zw)(z.courses[e][t-1].bjmcList.join("、"))+" ",1),q,(0,r.Uk)(" 备注: "+(0,u.zw)(z.courses[e][t-1].bz),1)],8,j)):1==z.userInfo.useraccounttype?((0,r.wg)(),(0,r.iD)("div",{key:1,class:"paike",onClick:s=>Y.paikeButton(e,t)},K,8,B)):((0,r.wg)(),(0,r.iD)("div",V))]))),64))])))),128))])])])]),(0,r.Wm)(it,{modelValue:d.dialogVisible,"onUpdate:modelValue":e[7]||(e[7]=t=>d.dialogVisible=t),title:"排课管理",width:"80%","before-close":d.handleClose},{default:(0,r.w5)((()=>[(0,r.Uk)(" 学期: "+(0,u.zw)(z.Xnxq)+" ",1),X,(0,r.Uk)(" 学院: "+(0,u.zw)(z.Yxs)+" ",1),C,(0,r.Uk)(" 实验室: "+(0,u.zw)(z.Sys)+" ",1),U,(0,r.Uk)(" 周次: "+(0,u.zw)(d.ZcOption)+" ",1),D,(0,r.Uk)(" 天: "+(0,u.zw)(z.thatDay)+" ",1),H,(0,r.Uk)(" 节: "+(0,u.zw)(z.thatSection)+" ",1),(0,r.Wm)(v),Z,(0,r.Wm)(v),W,(0,r._)("div",I,[$,(0,r.Wm)(Q,{modelValue:d.KcOption,"onUpdate:modelValue":e[4]||(e[4]=t=>d.KcOption=t),placeholder:"选择课程",onChange:Y.changeKc,style:{"margin-right":"1rem"}},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(Y.getKcList,((t,e)=>((0,r.wg)(),(0,r.j4)(G,{key:e,label:t,value:t},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"])]),A,(0,r._)("div",J,[N,(0,r.Wm)(Q,{modelValue:d.BjOption,"onUpdate:modelValue":e[5]||(e[5]=t=>d.BjOption=t),multiple:"",placeholder:"选择班级",onChange:Y.changeBj,style:{"margin-right":"1rem"}},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(z.Bjlist,((t,e)=>((0,r.wg)(),(0,r.j4)(G,{key:t.bh,label:t.bjmc,value:t.bh},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"])]),T,(0,r._)("div",P,[M,(0,r.Wm)(et,{style:{"margin-right":"1rem"},modelValue:z.bz,"onUpdate:modelValue":e[6]||(e[6]=t=>z.bz=t),autosize:{minRows:2,maxRows:4},type:"textarea",placeholder:"非必需输入"},null,8,["modelValue"])]),R,(0,r._)("div",E,[(0,r.Wm)(st,{size:"large",type:"primary",style:{width:"6rem"},onClick:Y.addPaikeButton},{default:(0,r.w5)((()=>[F])),_:1},8,["onClick"])])])),_:1},8,["modelValue","before-close"])])),_:1})}var Q=s(1897),tt=(s(3970),s(5574)),et=s(2826),st=s(4870),it={setup(){const t=(0,st.iH)(!1),e=(0,st.iH)([]),s=(0,st.iH)([]),i=(0,st.iH)([]),n=(0,st.iH)([]),l=(0,st.iH)([]),a=(0,st.iH)([]),o=t=>{Q.T.confirm("确定关闭对话框?","温馨提示",{type:"info",center:!0}).then((()=>{t()}))};return{dialogVisible:t,handleClose:o,XnxqOption:i,YxsOption:n,SysOption:l,ZcOption:a,KcOption:e,BjOption:s}},name:"SearchLabsSchedule",data(){return{userInfo:null,XnxqList:[],Xnxq:{},YxsList:[],Yxs:{},SysList:[],Sys:{},thatDay:"",thatSection:"",bz:"",sections:["周次\\节","1-2节","3-4节","5-6节","7-8节","9-10节"],weeks:["周一","周二","周三","周四","周五","周六","周日"],courses:[[],[],[],[],[],[],[]],Bjlist:[],KcAndBjList:[]}},created(){const t=sessionStorage.getItem("userInfo");t?this.userInfo=JSON.parse((0,et.Ne)(t)):this.$router.push("/login"),this.getXnxqList()},methods:{initcourse(){this.courses=[[],[],[],[],[],[],[]]},getXnxqList(){this.$axios.get("/weixin-ggjxzl/getXnxqList").then((t=>{const e=t.data;200==e.code?this.XnxqList=e.data:tt.z8.error("获取学年数据错误")}))},changeXnxq(){this.Xnxq=JSON.parse(JSON.stringify(this.XnxqOption)),this.XnxqOption=this.Xnxq.qsrq,this.initcourse(),this.YxsList.length||this.getYxsList()},getYxsList(){this.$axios.get("/weixin-yxs/getAllYxs").then((t=>{const e=t.data;200==e.code&&(this.YxsList=e.data)}))},changeYxs(){this.initcourse(),this.Yxs=JSON.parse(JSON.stringify(this.YxsOption)),this.YxsOption=this.Yxs.dwmc,this.SysOption="",this.getSysListById(this.Yxs.dwh)},changeSys(){this.initcourse(),this.Sys=JSON.parse(JSON.stringify(this.SysOption)),this.SysOption=this.Sys.sysmph,this.ZcOption="",this.KcAndBjList.length||this.getKcAndBjList(this.Xnxq.xnxqh,this.userInfo.useraccount)},changeZc(){console.log(this.ZcOption),this.getSysPaikeTable(this.Xnxq.xnxqh,this.ZcOption,this.Sys.sysh)},changeKc(){const t=this.KcAndBjList.filter((t=>t.kcmc==this.KcOption));1==t.length&&(this.Bjlist=t[0].classList)},changeBj(t){console.log(this.BjOption),console.log(t)},getKcAndBjList(t,e){this.$axios.post("/weixin-jskb/getjskb",{Xnxqh:t,Jgh:e}).then((t=>{const e=t.data;200==e.code&&(this.KcAndBjList=e.data)}))},getSysListById(t){this.$axios.get("/weixin-syszk/getById?id="+t).then((t=>{const e=t.data;200==e.code&&(this.SysList=e.data)}))},getSysPaikeTable(t,e,s){this.$axios.post("/weixin-sysxk/sysxkTable",{xnxq01id:this.Xnxq.xnxqh,kkzc:e,sysh:s}).then((t=>{const e=t.data;200==e.code&&(this.courses=e.data)}))},toScanDetail(t,e){var s=`<div style="width:200px;text-align:left!important;margin:0 auto;color:#999;font-size:14px">学院：${this.Yxs.dwmc}<br/>地点：${t.sysmph}<br/>课程：${t.kcmc}<br/>老师：${t.jgmc}<br/>班级：${t.bjmcList.join("、")}</div>`;this.Yxs.dwmc&&(0,tt.z8)({type:"success",dangerouslyUseHTMLString:!0,message:s})},paikeButton(t,e){this.XnxqOption&&this.YxsOption&&this.SysOption&&this.ZcOption&&this.KcAndBjList?(this.thatDay=t+1,this.thatSection=e,this.bz="",this.KcOption="",this.BjOption="",this.Bjlist=[],this.dialogVisible=!0):tt.z8.error("请完成上面的选择,并点击查询")},addPaikeButton(){this.KcOption&&this.BjOption&&0!=this.BjOption.length?(this.$axios.post("/weixin-sysxk/addSysxk",{xnxq01id:this.Xnxq.xnxqh,kkzc:this.ZcOption,kksjmx:this.thatDay+"-"+this.thatSection,kcmc:this.KcOption,jgmc:this.userInfo.userrealname,sysh:this.Sys.sysh,sysmph:this.Sys.sysmph,yxsh:this.Yxs.dwh,bz:this.bz,jg0101id:this.userInfo.useraccount,classList:this.getBjOptionList}).then((t=>{const e=t.data;200==e.code&&(tt.z8.success("添加成功"),this.getSysPaikeTable(this.Xnxq.xnxqh,this.ZcOption,this.Sys.sysh),this.dialogVisible=!1)})),console.log(this.getBjOptionList)):tt.z8.error("完成课程、班级选择")}},computed:{getKcList(){return this.KcAndBjList.map((t=>t.kcmc))},getBjOptionList(){return this.Bjlist.filter((t=>this.BjOption.some((e=>e==t.bh))))}}},nt=s(89);const lt=(0,nt.Z)(it,[["render",G],["__scopeId","data-v-76524c57"]]);var at=lt},6809:function(t,e,s){s(1758)},3852:function(t,e,s){s(1758)},9910:function(t,e,s){s(1758),s(7195)},7219:function(t,e,s){s(1758)},172:function(t,e,s){s(1758)},3970:function(t,e,s){s(1758),s(6809),s(172),s(7195)},7960:function(t,e,s){s(1758)},7195:function(t,e,s){s(1758)},451:function(t,e,s){s(1758)},3877:function(t,e,s){s(1758),s(172),s(1430),s(7960),s(451),s(6467)}}]);
//# sourceMappingURL=916.4f65131b.js.map