"use strict";(self["webpackChunkpaike_sut"]=self["webpackChunkpaike_sut"]||[]).push([[382],{67382:function(n,e,t){t.r(e),t.d(e,{default:function(){return D}});t(67437),t(9910),t(62064),t(47113),t(76905),t(172),t(89007),t(70451),t(86809),t(33877),t(17960),t(67219);var i=t(4143),o=t(54827),u=t(67188),a=t(43209),r=t(73060),d=t(76739),s=t(71267),l=t(57927),c=t(61244),f=(t(74916),t(64765),t(73396)),m=function(n){return(0,f.dD)("data-v-09db6ed9"),n=n(),(0,f.Cn)(),n},h=m((function(){return(0,f._)("h4",null,"二级管理员管理",-1)})),p=m((function(){return(0,f._)("br",null,null,-1)})),w={style:{display:"flex","align-items":"center"}},g=m((function(){return(0,f._)("p",{style:{"margin-right":"1rem"}},"学院",-1)})),x=(0,f.Uk)("添加管理员"),y=m((function(){return(0,f._)("br",null,null,-1)})),A=(0,f.Uk)("删除"),Y=(0,f.Uk)("禁用"),k=(0,f.Uk)("解封"),b={style:{margin:"0 auto"}},_=(0,f.Uk)("添加"),I=(0,f.Uk)("重置");function v(n,e,t,m,v,V){var L=c.os,W=l.BT,C=l.km,B=s.mi,U=d.Mr,D=a.$Y,O=r.EZ,$=a.eI,S=u.nH,j=u.ly,z=o.d0,F=i.Kf;return(0,f.wg)(),(0,f.j4)(F,{class:"account-container"},{default:(0,f.w5)((function(){return[h,(0,f.Wm)(L),p,(0,f.Wm)(U,null,{default:(0,f.w5)((function(){return[(0,f._)("div",w,[g,(0,f.Wm)(C,{modelValue:m.YxsOption,"onUpdate:modelValue":e[0]||(e[0]=function(n){return m.YxsOption=n}),placeholder:"选择学院",onChange:V.changeYxs,style:{"margin-right":"1rem"}},{default:(0,f.w5)((function(){return[((0,f.wg)(!0),(0,f.iD)(f.HY,null,(0,f.Ko)(v.YxsList,(function(n,e){return(0,f.wg)(),(0,f.j4)(W,{key:e,label:n.dwmc,value:n},null,8,["label","value"])})),128))]})),_:1},8,["modelValue","onChange"]),(0,f.Wm)(B,{type:"primary",style:{display:"inline-block"},onClick:V.addAdminDialog},{default:(0,f.w5)((function(){return[x]})),_:1},8,["onClick"])])]})),_:1}),y,(0,f.Wm)($,{data:V.getAdminFilter,style:{width:"100%"}},{default:(0,f.w5)((function(){return[(0,f.Wm)(D,{prop:"userrealname",label:"真实姓名",width:"180"}),(0,f.Wm)(D,{prop:"useraccount",label:"账号",width:"180"}),(0,f.Wm)(D,{prop:"state",label:"状态",width:"180"}),(0,f.Wm)(D,{label:"操作",width:"300rem"},{header:(0,f.w5)((function(){return[(0,f.Wm)(O,{modelValue:v.search,"onUpdate:modelValue":e[1]||(e[1]=function(n){return v.search=n}),placeholder:"输入二级管理员姓名、状态过滤"},null,8,["modelValue"])]})),default:(0,f.w5)((function(n){return[(0,f.Wm)(B,{type:"danger",onClick:function(e){return V.deleteAdminButton(n.row)}},{default:(0,f.w5)((function(){return[A]})),_:2},1032,["onClick"]),"1"==n.row.userenable?((0,f.wg)(),(0,f.j4)(B,{key:0,type:"danger",onClick:function(e){return V.doAdminPowerButton(n.row)}},{default:(0,f.w5)((function(){return[Y]})),_:2},1032,["onClick"])):((0,f.wg)(),(0,f.j4)(B,{key:1,type:"primary",onClick:function(e){return V.undoAdminPowerButton(n.row)}},{default:(0,f.w5)((function(){return[k]})),_:2},1032,["onClick"]))]})),_:1})]})),_:1},8,["data"]),(0,f.Wm)(z,{modelValue:m.adminDialogVisible,"onUpdate:modelValue":e[7]||(e[7]=function(n){return m.adminDialogVisible=n}),title:"添加二级管理员",width:"60%","before-close":m.handleClose},{default:(0,f.w5)((function(){return[(0,f.Wm)(j,{ref:"adminInfoRef",model:v.addAdminInfo,"label-position":"left",class:"sys-form"},{default:(0,f.w5)((function(){return[(0,f.Wm)(S,{label:"管理员姓名",prop:"userrealname",rules:[{required:!0,message:"必需填写,例如: 张三"}]},{default:(0,f.w5)((function(){return[(0,f.Wm)(O,{modelValue:v.addAdminInfo.userrealname,"onUpdate:modelValue":e[2]||(e[2]=function(n){return v.addAdminInfo.userrealname=n}),type:"text",autocomplete:"off"},null,8,["modelValue"])]})),_:1}),(0,f.Wm)(S,{label:"管理员账号",prop:"useraccount",rules:[{required:!0,message:"必需填写,登陆账号"}]},{default:(0,f.w5)((function(){return[(0,f.Wm)(O,{modelValue:v.addAdminInfo.useraccount,"onUpdate:modelValue":e[3]||(e[3]=function(n){return v.addAdminInfo.useraccount=n}),type:"text",autocomplete:"off"},null,8,["modelValue"])]})),_:1}),(0,f.Wm)(S,{label:"管理员密码",prop:"userpasswd",rules:[{required:!0,message:"必需填写,登陆密码"}]},{default:(0,f.w5)((function(){return[(0,f.Wm)(O,{modelValue:v.addAdminInfo.userpasswd,"onUpdate:modelValue":e[4]||(e[4]=function(n){return v.addAdminInfo.userpasswd=n}),type:"password",autocomplete:"off"},null,8,["modelValue"])]})),_:1}),(0,f.Wm)(S,null,{default:(0,f.w5)((function(){return[(0,f._)("div",b,[(0,f.Wm)(B,{type:"primary",onClick:e[5]||(e[5]=function(n){return V.addAdminButton("adminInfoRef")})},{default:(0,f.w5)((function(){return[_]})),_:1}),(0,f.Wm)(B,{onClick:e[6]||(e[6]=function(n){return V.resetForm("adminInfoRef")})},{default:(0,f.w5)((function(){return[I]})),_:1})])]})),_:1})]})),_:1},8,["model"])]})),_:1},8,["modelValue","before-close"])]})),_:1})}var V=t(61897),L=t(85574),W=(t(93970),t(77233),t(38862),t(47941),t(57327),t(41539),t(21249),t(26699),t(32023),t(44870)),C={setup:function(){var n=(0,W.iH)(""),e=(0,W.iH)(!1),t=function(n){V.T.confirm("确定关闭对话框?","温馨提示",{type:"info",center:!0}).then((function(){n()}))};return{YxsOption:n,handleClose:t,adminDialogVisible:e}},data:function(){return{YxsList:[],Yxs:{},AdminList:[],addAdminInfo:{yxsh:"",useraccount:"",userpasswd:"",userrealname:""},search:""}},created:function(){this.getYxsList()},methods:{clearAdminInfo:function(){this.addAdminInfo={yxsh:"",useraccount:"",userpasswd:"",userrealname:""}},resetForm:function(n){this.$refs[n].resetFields(),this.clearAdminInfo()},changeYxs:function(){this.Yxs=JSON.parse(JSON.stringify(this.YxsOption)),this.YxsOption=this.Yxs.dwmc,Loading.show(),this.getYxsAdminListById(this.Yxs.dwh),Loading.hide()},getYxsList:function(){var n=this;this.$axios.get("/weixin-yxs/getAllYxs").then((function(e){var t=e.data;200==t.code&&(n.YxsList=t.data)}))},getYxsAdminListById:function(n){var e=this;this.$axios.post("/weixin-yxsadmin/yxsAdminlist",{yxsh:n}).then((function(n){var t=n.data;200==t.code&&(e.AdminList=t.data)}))},addAdminDialog:function(){if(0==Object.keys(this.Yxs).length)return L.z8.error("请选择学院,如果旁边选择框没有选项,请刷新页面"),!1;this.clearAdminInfo(),this.adminDialogVisible=!0},addAdminButton:function(n){var e=this;this.addAdminInfo.yxsh=this.Yxs.dwh,this.$refs[n].validate((function(n){n?e.$axios.post("/weixin-yxsadmin/addAdmin",e.addAdminInfo).then((function(n){var t=n.data;200==t.code&&(L.z8.success("添加二级管理员成功"),e.adminDialogVisible=!1,e.getYxsAdminListById(e.Yxs.dwh))})):L.z8.error("表单不合法！！")}))},changeAdminState:function(n,e){var t=this;this.$axios.post("/weixin-yxsadmin/changeState",{account:n,state:e}).then((function(n){var e=n.data;200==e.code&&(L.z8.success("状态修改成功"),Loading.show(),t.getYxsAdminListById(t.Yxs.dwh),Loading.hide())}))},deleteAdminButton:function(n){var e=this;this.$axios.post("/weixin-yxsadmin/delAdmin",{account:n.useraccount}).then((function(n){var t=n.data;200==t.code&&(L.z8.success("删除成功"),Loading.show(),e.getYxsAdminListById(e.Yxs.dwh),Loading.hide())}))},doAdminPowerButton:function(n){this.changeAdminState(n.useraccount,"0")},undoAdminPowerButton:function(n){this.changeAdminState(n.useraccount,"1")}},computed:{getAdminFilter:function(){var n=this;return this.AdminList.map((function(n){return n["state"]="1"==n.userenable?"正常":"禁用",n})).filter((function(e){return!n.search||e.userrealname.includes(n.search.toLowerCase())||e.state.includes(n.search.toLowerCase())||e.useraccount.includes(n.search.toLowerCase())}))}}},B=t(40089);const U=(0,B.Z)(C,[["render",v],["__scopeId","data-v-09db6ed9"]]);var D=U},86809:function(n,e,t){t(11758)},67437:function(n,e,t){t(11758)},88:function(n,e,t){t(11758)},9910:function(n,e,t){t(11758),t(47195)},67219:function(n,e,t){t(11758)},47113:function(n,e,t){t(11758)},62064:function(n,e,t){t(11758)},172:function(n,e,t){t(11758)},93970:function(n,e,t){t(11758),t(86809),t(172),t(47195)},17960:function(n,e,t){t(11758)},47195:function(n,e,t){t(11758)},70451:function(n,e,t){t(11758)},33877:function(n,e,t){t(11758),t(172),t(31430),t(17960),t(70451),t(86467)},89007:function(n,e,t){t(11758),t(88),t(31430)},76905:function(n,e,t){t(11758),t(88),t(31430),t(44566),t(70451)}}]);
//# sourceMappingURL=382-legacy.9ec83698.js.map