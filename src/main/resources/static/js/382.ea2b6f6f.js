"use strict";(self["webpackChunkpaike_sut"]=self["webpackChunkpaike_sut"]||[]).push([[382],{7382:function(e,t,n){n.r(t),n.d(t,{default:function(){return D}});n(7437),n(9910),n(2064),n(7113),n(6905),n(172),n(9007),n(451),n(6809),n(3877),n(7960),n(7219);var i=n(4143),a=n(4827),s=n(7188),d=n(3209),o=n(3060),l=n(6739),u=n(1267),r=n(7927),m=n(1244),c=n(3396);const h=e=>((0,c.dD)("data-v-09db6ed9"),e=e(),(0,c.Cn)(),e),f=h((()=>(0,c._)("h4",null,"二级管理员管理",-1))),p=h((()=>(0,c._)("br",null,null,-1))),w={style:{display:"flex","align-items":"center"}},g=h((()=>(0,c._)("p",{style:{"margin-right":"1rem"}},"学院",-1))),x=(0,c.Uk)("添加管理员"),y=h((()=>(0,c._)("br",null,null,-1))),A=(0,c.Uk)("删除"),Y=(0,c.Uk)("禁用"),k=(0,c.Uk)("解封"),b={style:{margin:"0 auto"}},_=(0,c.Uk)("添加"),I=(0,c.Uk)("重置");function V(e,t,n,h,V,L){const W=m.os,C=r.BT,B=r.km,U=u.mi,v=l.Mr,D=d.$Y,O=o.EZ,$=d.eI,S=s.nH,j=s.ly,z=a.d0,F=i.Kf;return(0,c.wg)(),(0,c.j4)(F,{class:"account-container"},{default:(0,c.w5)((()=>[f,(0,c.Wm)(W),p,(0,c.Wm)(v,null,{default:(0,c.w5)((()=>[(0,c._)("div",w,[g,(0,c.Wm)(B,{modelValue:h.YxsOption,"onUpdate:modelValue":t[0]||(t[0]=e=>h.YxsOption=e),placeholder:"选择学院",onChange:L.changeYxs,style:{"margin-right":"1rem"}},{default:(0,c.w5)((()=>[((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(V.YxsList,((e,t)=>((0,c.wg)(),(0,c.j4)(C,{key:t,label:e.dwmc,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"]),(0,c.Wm)(U,{type:"primary",style:{display:"inline-block"},onClick:L.addAdminDialog},{default:(0,c.w5)((()=>[x])),_:1},8,["onClick"])])])),_:1}),y,(0,c.Wm)($,{data:L.getAdminFilter,style:{width:"100%"}},{default:(0,c.w5)((()=>[(0,c.Wm)(D,{prop:"userrealname",label:"真实姓名",width:"180"}),(0,c.Wm)(D,{prop:"useraccount",label:"账号",width:"180"}),(0,c.Wm)(D,{prop:"state",label:"状态",width:"180"}),(0,c.Wm)(D,{label:"操作",width:"300rem"},{header:(0,c.w5)((()=>[(0,c.Wm)(O,{modelValue:V.search,"onUpdate:modelValue":t[1]||(t[1]=e=>V.search=e),placeholder:"输入二级管理员姓名、状态过滤"},null,8,["modelValue"])])),default:(0,c.w5)((e=>[(0,c.Wm)(U,{type:"danger",onClick:t=>L.deleteAdminButton(e.row)},{default:(0,c.w5)((()=>[A])),_:2},1032,["onClick"]),"1"==e.row.userenable?((0,c.wg)(),(0,c.j4)(U,{key:0,type:"danger",onClick:t=>L.doAdminPowerButton(e.row)},{default:(0,c.w5)((()=>[Y])),_:2},1032,["onClick"])):((0,c.wg)(),(0,c.j4)(U,{key:1,type:"primary",onClick:t=>L.undoAdminPowerButton(e.row)},{default:(0,c.w5)((()=>[k])),_:2},1032,["onClick"]))])),_:1})])),_:1},8,["data"]),(0,c.Wm)(z,{modelValue:h.adminDialogVisible,"onUpdate:modelValue":t[7]||(t[7]=e=>h.adminDialogVisible=e),title:"添加二级管理员",width:"60%","before-close":h.handleClose},{default:(0,c.w5)((()=>[(0,c.Wm)(j,{ref:"adminInfoRef",model:V.addAdminInfo,"label-position":"left",class:"sys-form"},{default:(0,c.w5)((()=>[(0,c.Wm)(S,{label:"管理员姓名",prop:"userrealname",rules:[{required:!0,message:"必需填写,例如: 张三"}]},{default:(0,c.w5)((()=>[(0,c.Wm)(O,{modelValue:V.addAdminInfo.userrealname,"onUpdate:modelValue":t[2]||(t[2]=e=>V.addAdminInfo.userrealname=e),type:"text",autocomplete:"off"},null,8,["modelValue"])])),_:1}),(0,c.Wm)(S,{label:"管理员账号",prop:"useraccount",rules:[{required:!0,message:"必需填写,登陆账号"}]},{default:(0,c.w5)((()=>[(0,c.Wm)(O,{modelValue:V.addAdminInfo.useraccount,"onUpdate:modelValue":t[3]||(t[3]=e=>V.addAdminInfo.useraccount=e),type:"text",autocomplete:"off"},null,8,["modelValue"])])),_:1}),(0,c.Wm)(S,{label:"管理员密码",prop:"userpasswd",rules:[{required:!0,message:"必需填写,登陆密码"}]},{default:(0,c.w5)((()=>[(0,c.Wm)(O,{modelValue:V.addAdminInfo.userpasswd,"onUpdate:modelValue":t[4]||(t[4]=e=>V.addAdminInfo.userpasswd=e),type:"password",autocomplete:"off"},null,8,["modelValue"])])),_:1}),(0,c.Wm)(S,null,{default:(0,c.w5)((()=>[(0,c._)("div",b,[(0,c.Wm)(U,{type:"primary",onClick:t[5]||(t[5]=e=>L.addAdminButton("adminInfoRef"))},{default:(0,c.w5)((()=>[_])),_:1}),(0,c.Wm)(U,{onClick:t[6]||(t[6]=e=>L.resetForm("adminInfoRef"))},{default:(0,c.w5)((()=>[I])),_:1})])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue","before-close"])])),_:1})}var L=n(1897),W=n(5574),C=(n(3970),n(7233),n(4870)),B={setup(){const e=(0,C.iH)(""),t=(0,C.iH)(!1),n=e=>{L.T.confirm("确定关闭对话框?","温馨提示",{type:"info",center:!0}).then((()=>{e()}))};return{YxsOption:e,handleClose:n,adminDialogVisible:t}},data(){return{YxsList:[],Yxs:{},AdminList:[],addAdminInfo:{yxsh:"",useraccount:"",userpasswd:"",userrealname:""},search:""}},created(){this.getYxsList()},methods:{clearAdminInfo(){this.addAdminInfo={yxsh:"",useraccount:"",userpasswd:"",userrealname:""}},resetForm(e){this.$refs[e].resetFields(),this.clearAdminInfo()},changeYxs(){this.Yxs=JSON.parse(JSON.stringify(this.YxsOption)),this.YxsOption=this.Yxs.dwmc,Loading.show(),this.getYxsAdminListById(this.Yxs.dwh),Loading.hide()},getYxsList(){this.$axios.get("/weixin-yxs/getAllYxs").then((e=>{const t=e.data;200==t.code&&(this.YxsList=t.data)}))},getYxsAdminListById(e){this.$axios.post("/weixin-yxsadmin/yxsAdminlist",{yxsh:e}).then((e=>{const t=e.data;200==t.code&&(this.AdminList=t.data)}))},addAdminDialog(){if(0==Object.keys(this.Yxs).length)return W.z8.error("请选择学院,如果旁边选择框没有选项,请刷新页面"),!1;this.clearAdminInfo(),this.adminDialogVisible=!0},addAdminButton(e){this.addAdminInfo.yxsh=this.Yxs.dwh,this.$refs[e].validate((e=>{e?this.$axios.post("/weixin-yxsadmin/addAdmin",this.addAdminInfo).then((e=>{const t=e.data;200==t.code&&(W.z8.success("添加二级管理员成功"),this.adminDialogVisible=!1,this.getYxsAdminListById(this.Yxs.dwh))})):W.z8.error("表单不合法！！")}))},changeAdminState(e,t){this.$axios.post("/weixin-yxsadmin/changeState",{account:e,state:t}).then((e=>{const t=e.data;200==t.code&&(W.z8.success("状态修改成功"),Loading.show(),this.getYxsAdminListById(this.Yxs.dwh),Loading.hide())}))},deleteAdminButton(e){this.$axios.post("/weixin-yxsadmin/delAdmin",{account:e.useraccount}).then((e=>{const t=e.data;200==t.code&&(W.z8.success("删除成功"),Loading.show(),this.getYxsAdminListById(this.Yxs.dwh),Loading.hide())}))},doAdminPowerButton(e){this.changeAdminState(e.useraccount,"0")},undoAdminPowerButton(e){this.changeAdminState(e.useraccount,"1")}},computed:{getAdminFilter(){return this.AdminList.map((e=>(e["state"]="1"==e.userenable?"正常":"禁用",e))).filter((e=>!this.search||e.userrealname.includes(this.search.toLowerCase())||e.state.includes(this.search.toLowerCase())||e.useraccount.includes(this.search.toLowerCase())))}}},U=n(89);const v=(0,U.Z)(B,[["render",V],["__scopeId","data-v-09db6ed9"]]);var D=v},6809:function(e,t,n){n(1758)},7437:function(e,t,n){n(1758)},88:function(e,t,n){n(1758)},9910:function(e,t,n){n(1758),n(7195)},7219:function(e,t,n){n(1758)},7113:function(e,t,n){n(1758)},2064:function(e,t,n){n(1758)},172:function(e,t,n){n(1758)},3970:function(e,t,n){n(1758),n(6809),n(172),n(7195)},7960:function(e,t,n){n(1758)},7195:function(e,t,n){n(1758)},451:function(e,t,n){n(1758)},3877:function(e,t,n){n(1758),n(172),n(1430),n(7960),n(451),n(6467)},9007:function(e,t,n){n(1758),n(88),n(1430)},6905:function(e,t,n){n(1758),n(88),n(1430),n(4566),n(451)}}]);
//# sourceMappingURL=382.ea2b6f6f.js.map