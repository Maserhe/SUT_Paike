"use strict";(self["webpackChunkpaike_sut"]=self["webpackChunkpaike_sut"]||[]).push([[124],{124:function(e,t,s){s.r(t),s.d(t,{default:function(){return R}});s(7437),s(9910),s(33),s(6226),s(877),s(7579),s(8474),s(6905),s(3069),s(6809),s(172),s(9007),s(451),s(3877),s(7960),s(7219);var i=s(4143),a=s(4827),n=s(1853),l=s(1832),o=s(1015),d=s(3209),u=s(426),r=s(1267),h=s(3060),c=s(6739),m=s(7927),p=s(1244),y=s(3396),g=s(7139),f=s(9242);const w=e=>((0,y.dD)("data-v-613471e2"),e=e(),(0,y.Cn)(),e),b=w((()=>(0,y._)("h4",null,"报修信息管理",-1))),S=w((()=>(0,y._)("br",null,null,-1))),L={style:{display:"flex","align-items":"center"}},k=w((()=>(0,y._)("p",{style:{"margin-right":"1rem"}},"学院",-1))),W=w((()=>(0,y._)("br",null,null,-1))),x=(0,y.Uk)("维修管理"),_=(0,y.Uk)("学院"),C=(0,y.Uk)("实验室门牌号"),z=(0,y.Uk)("实验室类型"),Y=(0,y.Uk)("故障描述"),U=(0,y.Uk)(" 无需维修 "),V=(0,y.Uk)("故障描述"),v=w((()=>(0,y._)("br",null,null,-1))),D={key:0,style:{"text-align":"center"}},B=(0,y.Uk)("维修"),O=(0,y.Uk)("维修");function F(e,t,s,w,F,I){const N=p.os,T=m.BT,$=m.km,j=c.Mr,P=d.$Y,R=h.EZ,J=r.mi,H=u.R,K=d.eI,M=(0,y.up)("i-tickets"),Q=o.gn,Z=l.QQ,q=(0,y.up)("i-location-information"),A=(0,y.up)("i-timer"),E=(0,y.up)("i-remove-filled"),G=l.Lf,X=n.p8,ee=n.Ub,te=a.d0,se=i.Kf;return(0,y.wg)(),(0,y.j4)(se,{class:"account-container"},{default:(0,y.w5)((()=>[b,(0,y.Wm)(N),S,(0,y.Wm)(j,null,{default:(0,y.w5)((()=>[(0,y._)("div",L,[k,(0,y.Wm)($,{modelValue:w.YxsOption,"onUpdate:modelValue":t[0]||(t[0]=e=>w.YxsOption=e),placeholder:"选择学院",onChange:I.changeYxs,style:{"margin-right":"1rem"}},{default:(0,y.w5)((()=>[((0,y.wg)(!0),(0,y.iD)(y.HY,null,(0,y.Ko)(F.YxsList,((e,t)=>((0,y.wg)(),(0,y.j4)(T,{key:t,label:e.dwmc,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"])])])),_:1}),W,(0,y.Wm)(K,{data:I.getSysFilter.slice((F.currentPage-1)*F.pagesize,F.currentPage*F.pagesize),style:{width:"100%"}},{append:(0,y.w5)((()=>[(0,y.Wm)(H,{onSizeChange:I.handleSizeChange,onCurrentChange:I.handleCurrentChange,"current-page":F.currentPage,"page-sizes":[5,10,20,40],"page-size":F.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:I.getSysFilter.length},null,8,["onSizeChange","onCurrentChange","current-page","page-size","total"])])),default:(0,y.w5)((()=>[(0,y.Wm)(P,{type:"index"}),(0,y.Wm)(P,{label:"实验名称",prop:"sysmc",width:"220rem"}),(0,y.Wm)(P,{label:"门牌号",prop:"sysmph"}),(0,y.Wm)(P,{label:"容量",prop:"capacity"}),(0,y.Wm)(P,{label:"状态",prop:"state"}),(0,y.Wm)(P,{label:"操作",width:"300rem"},{header:(0,y.w5)((()=>[(0,y.Wm)(R,{modelValue:F.search,"onUpdate:modelValue":t[1]||(t[1]=e=>F.search=e),placeholder:"输入实验室门牌号、名称过滤"},null,8,["modelValue"])])),default:(0,y.w5)((e=>[(0,y.Wm)(J,{type:"primary",onClick:t=>I.repairSysDialog(e.row)},{default:(0,y.w5)((()=>[x])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),(0,y.Wm)(te,{modelValue:w.sysDialogVisible,"onUpdate:modelValue":t[4]||(t[4]=e=>w.sysDialogVisible=e),title:"报修信息管理",width:"60%","before-close":w.handleClose},{default:(0,y.w5)((()=>[(0,y.Wm)(ee,{modelValue:F.activeName,"onUpdate:modelValue":t[3]||(t[3]=e=>F.activeName=e),onTabClick:I.handleClick},{default:(0,y.w5)((()=>[(0,y.Wm)(X,{label:"非设备维修",name:"first"},{default:(0,y.w5)((()=>[(0,y.Wm)(G,{column:1,border:""},{default:(0,y.w5)((()=>[(0,y.Wm)(Z,null,{label:(0,y.w5)((()=>[(0,y.Wm)(Q,null,{default:(0,y.w5)((()=>[(0,y.Wm)(M)])),_:1}),_])),default:(0,y.w5)((()=>[(0,y.Uk)((0,g.zw)(F.Yxs.dwmc),1)])),_:1}),(0,y.Wm)(Z,null,{label:(0,y.w5)((()=>[(0,y.Wm)(Q,null,{default:(0,y.w5)((()=>[(0,y.Wm)(q)])),_:1}),C])),default:(0,y.w5)((()=>[(0,y.Uk)((0,g.zw)(F.Sys.sysmph),1)])),_:1}),(0,y.Wm)(Z,null,{label:(0,y.w5)((()=>[(0,y.Wm)(Q,null,{default:(0,y.w5)((()=>[(0,y.Wm)(A)])),_:1}),z])),default:(0,y.w5)((()=>[(0,y.Uk)(" "+(0,g.zw)(F.Sys.sysmc),1)])),_:1}),void 0==F.Sys.info?((0,y.wg)(),(0,y.j4)(Z,{key:0},{label:(0,y.w5)((()=>[(0,y.Wm)(Q,null,{default:(0,y.w5)((()=>[(0,y.Wm)(E)])),_:1}),Y])),default:(0,y.w5)((()=>[U])),_:1})):((0,y.wg)(),(0,y.j4)(Z,{key:1},{label:(0,y.w5)((()=>[(0,y.Wm)(Q,null,{default:(0,y.w5)((()=>[(0,y.Wm)(E)])),_:1}),V])),default:(0,y.w5)((()=>[(0,y.Uk)(" "+(0,g.zw)(F.Sys.info),1)])),_:1}))])),_:1}),v,void 0!=F.Sys.info?((0,y.wg)(),(0,y.iD)("div",D,[(0,y.Wm)(J,{size:"large",type:"primary",style:{width:"6rem"},onClick:t[2]||(t[2]=(0,f.iM)((e=>I.sysRepairButton()),["prevent"]))},{default:(0,y.w5)((()=>[B])),_:1})])):(0,y.kq)("",!0)])),_:1}),(0,y.Wm)(X,{label:"设备维修",name:"second"},{default:(0,y.w5)((()=>[(0,y.Wm)(K,{data:I.sbTableInfo,style:{width:"100%"}},{default:(0,y.w5)((()=>[(0,y.Wm)(P,{type:"index"}),(0,y.Wm)(P,{label:"设备名称",prop:"sbmc"}),(0,y.Wm)(P,{label:"设备状态",prop:"state"}),(0,y.Wm)(P,{label:"故障信息",prop:"info"}),(0,y.Wm)(P,{label:"操作"},{default:(0,y.w5)((e=>[(0,y.Wm)(J,{type:"primary",onClick:t=>I.sbRepairButton(e.row.sbh)},{default:(0,y.w5)((()=>[O])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])])),_:1})])),_:1},8,["modelValue","onTabClick"])])),_:1},8,["modelValue","before-close"])])),_:1})}var I=s(1897),N=s(5574),T=(s(3970),s(7233),s(4870)),$={setup(){const e=(0,T.iH)(""),t=(0,T.iH)(!1),s=e=>{I.T.confirm("确定关闭对话框?","温馨提示",{type:"info",center:!0}).then((()=>{e()}))};return{YxsOption:e,handleClose:s,sysDialogVisible:t}},data(){return{currentPage:1,pagesize:10,search:"",YxsList:[],Yxs:{},SysList:[],Sys:{},activeName:"first",SbList:[],Sb:{}}},created(){this.getYxsList()},methods:{handleSizeChange:function(e){this.pagesize=e},handleCurrentChange:function(e){this.currentPage=e},changeYxs(){this.Yxs=JSON.parse(JSON.stringify(this.YxsOption)),this.YxsOption=this.Yxs.dwmc,Loading.show(),this.getSysListById(this.Yxs.dwh),Loading.hide()},getYxsList(){this.$axios.get("/weixin-yxs/getAllYxs").then((e=>{const t=e.data;200==t.code&&(this.YxsList=t.data)}))},getSysListById(e){this.$axios.post("/weixin-syszk/yxsFaultSysList",{id:e}).then((e=>{const t=e.data;200==t.code&&(this.SysList=t.data)}))},getSbFaultList(e){this.$axios.post("/weixin-sbzk/sbFaultSbList",{sysh:e}).then((e=>{const t=e.data;200==t.code&&(this.SbList=t.data)}))},repairSysDialog(e){this.Sys=JSON.parse(JSON.stringify(e)),this.sysDialogVisible=!0,Loading.show(),this.getSbFaultList(this.Sys.sysh),Loading.hide()},handleClick(e){"second"==e.props.name&&0==this.SbList.length&&(Loading.show(),this.getSbFaultList(this.Sys.sysh),Loading.hide())},sysRepairButton(){Loading.show(),this.$axios.post("/weixin-syszk/repairSys",{sysh:this.Sys.sysh,info:"",systype:"0"}).then((e=>{const t=e.data;200==t.code&&(N.z8.success("维修成功"),Loading.hide(),this.sysDialogVisible=!1,Loading.show(),this.getSysListById(this.Yxs.dwh),Loading.hide())})).catch((e=>{Loading.hide()}))},sbRepairButton(e){Loading.show(),this.$axios.post("/weixin-sbzk/repairSb",{sysh:this.Sys.sysh,info:"",sbzt:"0",sbh:e}).then((e=>{const t=e.data;200==t.code&&(N.z8.success("维修成功"),Loading.hide(),this.sysDialogVisible=!1,Loading.show(),this.getSysListById(this.Yxs.dwh),Loading.hide())})).catch((e=>{Loading.hide()}))}},computed:{getSysFilter(){return this.SysList.map((e=>(0==e.systype?e["state"]="开放":1==e.systype?e["state"]="禁用":e["state"]="报修",e))).filter((e=>!this.search||e.sysmc.includes(this.search.toLowerCase())||e.sysmph.includes(this.search.toLowerCase())||e.state.includes(this.search.toLowerCase())))},sbTableInfo(){return this.SbList.map((e=>(0==e.sbzt?e["state"]="开放":1==e.sbzt?e["state"]="禁用":e["state"]="报修",e)))}}},j=s(89);const P=(0,j.Z)($,[["render",F],["__scopeId","data-v-613471e2"]]);var R=P},6809:function(e,t,s){s(1758)},7437:function(e,t,s){s(1758)},88:function(e,t,s){s(1758)},7579:function(e,t,s){s(1758)},877:function(e,t,s){s(1758),s(7579)},9910:function(e,t,s){s(1758),s(7195)},7219:function(e,t,s){s(1758)},172:function(e,t,s){s(1758)},3970:function(e,t,s){s(1758),s(6809),s(172),s(7195)},7960:function(e,t,s){s(1758)},7195:function(e,t,s){s(1758)},3069:function(e,t,s){s(1758),s(3877)},451:function(e,t,s){s(1758)},3877:function(e,t,s){s(1758),s(172),s(1430),s(7960),s(451),s(6467)},6226:function(e,t,s){s(1758)},9007:function(e,t,s){s(1758),s(88),s(1430)},6905:function(e,t,s){s(1758),s(88),s(1430),s(4566),s(451)},33:function(e,t,s){s(1758)}}]);
//# sourceMappingURL=124.d1309f47.js.map