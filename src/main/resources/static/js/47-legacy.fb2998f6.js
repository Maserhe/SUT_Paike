"use strict";(self["webpackChunkpaike_sut"]=self["webpackChunkpaike_sut"]||[]).push([[47],{67047:function(e,n,t){t.r(n),t.d(n,{default:function(){return O}});t(67437),t(11758),t(28474),t(9910),t(62064),t(47113),t(76905),t(83069),t(53855),t(172),t(89007),t(70451),t(86809),t(33877),t(17960),t(67219);var s=t(4143),o=t(51853),i=t(89523),a=t(41015),u=t(54827),l=t(67188),r=t(43209),d=t(10426),c=t(42563),f=t(73060),m=t(76739),y=t(71267),p=t(57927),h=t(61244),g=(t(47042),t(74916),t(64765),t(73396)),w=(0,g._)("h3",null,"实验室管理",-1),S={style:{display:"flex","align-items":"center"}},x=(0,g._)("p",{style:{"margin-right":"1rem"}},"学院",-1),I=(0,g.Uk)("添加实验室"),_=(0,g._)("h1",null,"hahaha",-1),W=(0,g.Uk)("修改"),C=(0,g.Uk)("删除"),V=(0,g.Uk)("更新"),b=(0,g.Uk)("重置"),k=(0,g.Uk)("添加"),v=(0,g.Uk)("重置"),Y={style:{"text-align":"center"}},z=(0,g._)("div",{class:"el-upload__text"},[(0,g.Uk)("拖拽文件到这或者"),(0,g._)("em",null,"点击上传")],-1),L=(0,g._)("div",{class:"el-upload__tip"},"需要上传指定格式的csv文件,请先下载模版,仿照着写",-1),U=(0,g._)("a",{href:"/addLabs.csv",download:"addLabs.csv"},"模版下载",-1);function B(e,n,t,B,F,$){var D=h.os,R=p.BT,q=p.km,M=y.mi,O=m.Mr,H=r.$Y,N=f.EZ,P=c.i1,T=d.R,j=r.eI,J=l.nH,K=l.ly,Z=u.d0,A=o.p8,E=(0,g.up)("i-upload-filled"),G=a.gn,Q=i.LW,X=o.Ub,ee=s.Kf;return(0,g.wg)(),(0,g.j4)(ee,{class:"account-container"},{default:(0,g.w5)((function(){return[w,(0,g.Wm)(D),(0,g.Wm)(O,null,{default:(0,g.w5)((function(){return[(0,g._)("div",S,[x,(0,g.Wm)(q,{modelValue:F.YxsOption,"onUpdate:modelValue":n[0]||(n[0]=function(e){return F.YxsOption=e}),placeholder:"Select",onChange:$.changeYxs,style:{"margin-right":"1rem"}},{default:(0,g.w5)((function(){return[((0,g.wg)(!0),(0,g.iD)(g.HY,null,(0,g.Ko)(F.YxsList,(function(e,n){return(0,g.wg)(),(0,g.j4)(R,{key:n,label:e.dwmc,value:e},null,8,["label","value"])})),128))]})),_:1},8,["modelValue","onChange"]),(0,g.Wm)(M,{type:"primary",style:{display:"inline-block"},onClick:$.addSysDialog},{default:(0,g.w5)((function(){return[I]})),_:1},8,["onClick"])])]})),_:1}),(0,g.Wm)(j,{data:$.getSysFilter.slice((F.currentPage-1)*F.pagesize,F.currentPage*F.pagesize),style:{width:"100%"}},{tableHead:(0,g.w5)((function(){return[_]})),append:(0,g.w5)((function(){return[(0,g.Wm)(T,{onSizeChange:$.handleSizeChange,onCurrentChange:$.handleCurrentChange,"current-page":F.currentPage,"page-sizes":[5,10,20,40],"page-size":F.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:$.getSysFilter.length},null,8,["onSizeChange","onCurrentChange","current-page","page-size","total"])]})),default:(0,g.w5)((function(){return[(0,g.Wm)(H,{type:"index"}),(0,g.Wm)(H,{label:"实验名称",prop:"sysmc",width:"220rem"}),(0,g.Wm)(H,{label:"门牌号",prop:"sysmph"}),(0,g.Wm)(H,{label:"操作",width:"300rem"},{header:(0,g.w5)((function(){return[(0,g.Wm)(N,{modelValue:F.search,"onUpdate:modelValue":n[1]||(n[1]=function(e){return F.search=e}),placeholder:"输入实验室门牌号、名称搜索"},null,8,["modelValue"])]})),default:(0,g.w5)((function(e){return[(0,g.Wm)(M,{type:"primary",onClick:function(n){return $.changeSysInfo(e.row)}},{default:(0,g.w5)((function(){return[W]})),_:2},1032,["onClick"]),(0,g.Wm)(P,{title:"确定要删除该实验室?",onConfirm:function(n){return $.deleteSysById(e.row.sysh)}},{reference:(0,g.w5)((function(){return[(0,g.Wm)(M,{type:"danger"},{default:(0,g.w5)((function(){return[C]})),_:1})]})),_:2},1032,["onConfirm"])]})),_:1})]})),_:1},8,["data"]),(0,g.Wm)(Z,{modelValue:B.dialogVisible,"onUpdate:modelValue":n[6]||(n[6]=function(e){return B.dialogVisible=e}),title:"实验室信息",width:"80%","before-close":B.handleClose},{default:(0,g.w5)((function(){return[(0,g.Wm)(K,{ref:"sysInfoRef",model:F.SysInfo,"label-position":"top","label-width":"30rem"},{default:(0,g.w5)((function(){return[(0,g.Wm)(J,{label:"实验室的名称",prop:"sysmc",rules:[{required:!0,message:"非必需填写,例如: 人工智能实验室, 不填写的话默认名称: 机房"}]},{default:(0,g.w5)((function(){return[(0,g.Wm)(N,{modelValue:F.SysInfo.sysmc,"onUpdate:modelValue":n[2]||(n[2]=function(e){return F.SysInfo.sysmc=e}),type:"text",autocomplete:"off"},null,8,["modelValue"])]})),_:1}),(0,g.Wm)(J,{label:"实验室门牌号",prop:"sysmph",rules:[{required:!0,message:"必需填写,表示实验室位置,例如: 205"}]},{default:(0,g.w5)((function(){return[(0,g.Wm)(N,{modelValue:F.SysInfo.sysmph,"onUpdate:modelValue":n[3]||(n[3]=function(e){return F.SysInfo.sysmph=e}),type:"text",autocomplete:"off"},null,8,["modelValue"])]})),_:1}),(0,g.Wm)(J,null,{default:(0,g.w5)((function(){return[(0,g.Wm)(M,{type:"primary",onClick:n[4]||(n[4]=function(e){return $.updateSysInfo("sysInfoRef")})},{default:(0,g.w5)((function(){return[V]})),_:1}),(0,g.Wm)(M,{onClick:n[5]||(n[5]=function(e){return $.resetForm("sysInfoRef")})},{default:(0,g.w5)((function(){return[b]})),_:1})]})),_:1})]})),_:1},8,["model"])]})),_:1},8,["modelValue","before-close"]),(0,g.Wm)(Z,{modelValue:B.addDialogVisible,"onUpdate:modelValue":n[12]||(n[12]=function(e){return B.addDialogVisible=e}),title:"添加实验室",width:"80%","before-close":B.handleClose},{default:(0,g.w5)((function(){return[(0,g.Wm)(X,{modelValue:F.activeName,"onUpdate:modelValue":n[11]||(n[11]=function(e){return F.activeName=e}),onTabClick:$.handleClick},{default:(0,g.w5)((function(){return[(0,g.Wm)(A,{label:"单个添加",name:"first"},{default:(0,g.w5)((function(){return[(0,g.Wm)(K,{ref:"addSysInfoRef",model:F.addSysInfo,"label-position":"top","label-width":"30rem"},{default:(0,g.w5)((function(){return[(0,g.Wm)(J,{label:"实验室的名称",prop:"sysmc",rules:[{required:!0,message:"非必需填写,例如: 人工智能实验室, 不填写的话默认名称: 机房"}]},{default:(0,g.w5)((function(){return[(0,g.Wm)(N,{modelValue:F.addSysInfo.sysmc,"onUpdate:modelValue":n[7]||(n[7]=function(e){return F.addSysInfo.sysmc=e}),type:"text",autocomplete:"off"},null,8,["modelValue"])]})),_:1}),(0,g.Wm)(J,{label:"实验室门牌号",prop:"sysmph",rules:[{required:!0,message:"必需填写,表示实验室位置,例如: 205"}]},{default:(0,g.w5)((function(){return[(0,g.Wm)(N,{modelValue:F.addSysInfo.sysmph,"onUpdate:modelValue":n[8]||(n[8]=function(e){return F.addSysInfo.sysmph=e}),type:"text",autocomplete:"off"},null,8,["modelValue"])]})),_:1}),(0,g.Wm)(J,null,{default:(0,g.w5)((function(){return[(0,g.Wm)(M,{type:"primary",onClick:n[9]||(n[9]=function(e){return $.addSys("addSysInfoRef")})},{default:(0,g.w5)((function(){return[k]})),_:1}),(0,g.Wm)(M,{onClick:n[10]||(n[10]=function(e){return $.resetForm("addSysInfoRef")})},{default:(0,g.w5)((function(){return[v]})),_:1})]})),_:1})]})),_:1},8,["model"])]})),_:1}),(0,g.Wm)(A,{label:"批量添加",name:"second"},{default:(0,g.w5)((function(){return[(0,g._)("div",Y,[(0,g.Wm)(Q,{drag:"",action:"","http-request":$.uploadCSVFile,limit:1,accept:".csv"},{tip:(0,g.w5)((function(){return[L]})),default:(0,g.w5)((function(){return[(0,g.Wm)(G,{class:"el-icon--upload"},{default:(0,g.w5)((function(){return[(0,g.Wm)(E)]})),_:1}),z]})),_:1},8,["http-request"]),(0,g.Wm)(M,{type:"primary"},{default:(0,g.w5)((function(){return[U]})),_:1})])]})),_:1})]})),_:1},8,["modelValue","onTabClick"])]})),_:1},8,["modelValue","before-close"])]})),_:1})}var F=t(61897),$=t(85574),D=(t(93970),t(77233),t(38862),t(57327),t(41539),t(26699),t(32023),t(44870)),R={setup:function(){var e=(0,D.iH)(!1),n=(0,D.iH)(!1),t=function(e){F.T.confirm("确定关闭对话框?","温馨提示",{type:"info",center:!0}).then((function(){e()}))};return{dialogVisible:e,handleClose:t,addDialogVisible:n}},data:function(){return{currentPage:1,pagesize:10,search:"",YxsList:[],YxsOption:"选择学院",YxsId:"",YxsMc:"",SysList:[],SysInfo:{sysh:"",sysmc:"",sysmph:"",yxsh:"",yxmc:""},activeName:"first",addSysInfo:{sysmc:"",sysmph:""}}},created:function(){this.getYxsList()},methods:{handleClick:function(e,n){console.log(e,n)},clearSysInfo:function(){this.SysInfo={sysh:"",sysmc:"",sysmph:"",yxsh:"",yxmc:""}},resetForm:function(e){this.$refs[e].resetFields(),this.clearSysInfo()},handleSizeChange:function(e){this.pagesize=e},handleCurrentChange:function(e){this.currentPage=e},getYxsList:function(){var e=this;this.$axios.get("/weixin-yxs/getAllYxs").then((function(n){var t=n.data;200==t.code&&(e.YxsList=t.data)}))},changeYxs:function(e){e.dwh?(this.YxsOption=e.dwmc,this.YxsId=e.dwh,this.YxsMc=e.dwmc,this.getSysListById(e.dwh)):$.z8.error("请选择学院")},getSysListById:function(e){var n=this;this.$axios.get("/weixin-syszk/getById?id="+e).then((function(e){var t=e.data;200==t.code&&(n.SysList=t.data)}))},deleteSysById:function(e){var n=this;this.$axios.post("/weixin-syszk/deleteById?id="+e).then((function(e){var t=e.data;200==t.code?($.z8.success("删除成功"),n.getSysListById(n.YxsId)):$.z8.error("删除错误")}))},changeSysInfo:function(e){this.SysInfo=null,this.dialogVisible=!0,this.SysInfo=JSON.parse(JSON.stringify(e))},updateSysInfo:function(e){var n=this;this.$refs[e].validate((function(e){e?n.$axios.post("/weixin-syszk/updateSysInfo",{sysh:n.SysInfo.sysh,sysmc:n.SysInfo.sysmc,sysmph:n.SysInfo.sysmph}).then((function(e){var t=e.data;200==t.code&&($.z8.success("更新数据成功"),n.getSysListById(n.YxsId))})):$.z8.error("表单不合法！！")}))},addSysDialog:function(){if(!this.YxsId)return $.z8.error("请选择学院,如果旁边选择框没有选项,请刷新页面"),!1;this.addDialogVisible=!0},addSys:function(e){var n=this;this.$refs[e].validate((function(e){e&&n.$axios.post("/weixin-syszk/addSys",{sysmc:n.addSysInfo.sysmc,sysmph:n.addSysInfo.sysmph,yxsh:n.YxsId,yxmc:n.YxsMc}).then((function(e){var t=e.data;200==t.code?($.z8.success("添加成功"),n.getSysListById(n.YxsId)):$.z8.error(t.msg)}))}))},uploadCSVFile:function(e){var n=e.file,t=new FormData;t.append("file",n),t.append("YxsId",this.YxsId),t.append("YxsMc",this.YxsMc),console.log(t),this.$axios({url:"/weixin-syszk/addSYSList",method:"post",data:t,headers:{"Content-Type":"multipart/form-data"}}).then((function(e){var n=e.data;200==n.code?($.z8.success("添加成功"),location.reload()):$.z8.error(n.msg)}))}},computed:{getSysFilter:function(){var e=this;return this.SysList.filter((function(n){return!e.search||n.sysmc.includes(e.search.toLowerCase())||n.sysmph.includes(e.search.toLowerCase())}))}}},q=t(40089);const M=(0,q.Z)(R,[["render",B]]);var O=M},86809:function(e,n,t){t(11758)},67437:function(e,n,t){t(11758)},88:function(e,n,t){t(11758)},9910:function(e,n,t){t(11758),t(47195)},67219:function(e,n,t){t(11758)},47113:function(e,n,t){t(11758)},62064:function(e,n,t){t(11758)},172:function(e,n,t){t(11758)},93970:function(e,n,t){t(11758),t(86809),t(172),t(47195)},17960:function(e,n,t){t(11758)},47195:function(e,n,t){t(11758)},83069:function(e,n,t){t(11758),t(33877)},53855:function(e,n,t){t(11758),t(16962)},70451:function(e,n,t){t(11758)},33877:function(e,n,t){t(11758),t(172),t(31430),t(17960),t(70451),t(86467)},89007:function(e,n,t){t(11758),t(88),t(31430)},76905:function(e,n,t){t(11758),t(88),t(31430),t(44566),t(70451)}}]);
//# sourceMappingURL=47-legacy.fb2998f6.js.map