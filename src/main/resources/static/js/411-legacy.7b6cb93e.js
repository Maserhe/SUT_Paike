"use strict";(self["webpackChunkpaike_sut"]=self["webpackChunkpaike_sut"]||[]).push([[411],{24411:function(e,n,o){o.r(n),o.d(n,{default:function(){return F}});o(62064),o(86809),o(44566),o(47113),o(172),o(28474);var r=o(67188),t=o(71267),a=o(19805),s=o(73060),i=o(41015),l=o(73396),u=o(49242),c=function(e){return(0,l.dD)("data-v-11558830"),e=e(),(0,l.Cn)(),e},d={class:"login-container"},p=c((function(){return(0,l._)("div",{class:"title-container"},[(0,l._)("h3",{class:"title"},"实验室管理系统")],-1)})),m={class:"svg-container"},f={class:"svg-container"},w=(0,l.Uk)("登陆");function g(e,n,o,c,g,h){var v=(0,l.up)("i-user"),y=i.gn,k=s.EZ,_=r.nH,T=(0,l.up)("i-lock"),F=(0,l.up)("i-view"),W=a.Q0,b=t.mi,C=r.ly;return(0,l.wg)(),(0,l.iD)("div",d,[(0,l.Wm)(C,{ref:"loginForm",model:g.loginForm,rules:g.loginRules,class:"login-form",autocomplete:"on","label-position":"left"},{default:(0,l.w5)((function(){return[p,(0,l.Wm)(_,{prop:"username"},{default:(0,l.w5)((function(){return[(0,l._)("span",m,[(0,l.Wm)(y,null,{default:(0,l.w5)((function(){return[(0,l.Wm)(v)]})),_:1})]),(0,l.Wm)(k,{ref:"username",modelValue:g.loginForm.username,"onUpdate:modelValue":n[0]||(n[0]=function(e){return g.loginForm.username=e}),placeholder:"Username",name:"username",type:"text",tabindex:"1",autocomplete:"on"},null,8,["modelValue"])]})),_:1}),(0,l.Wm)(W,{modelValue:g.capsTooltip,"onUpdate:modelValue":n[4]||(n[4]=function(e){return g.capsTooltip=e}),content:"查看密码",placement:"right",manual:""},{default:(0,l.w5)((function(){return[(0,l.Wm)(_,{prop:"password"},{default:(0,l.w5)((function(){return[(0,l._)("span",f,[(0,l.Wm)(y,null,{default:(0,l.w5)((function(){return[(0,l.Wm)(T)]})),_:1})]),((0,l.wg)(),(0,l.j4)(k,{key:g.passwordType,ref:"password",modelValue:g.loginForm.password,"onUpdate:modelValue":n[1]||(n[1]=function(e){return g.loginForm.password=e}),type:g.passwordType,placeholder:"Password",name:"password",tabindex:"2",autocomplete:"on",onKeyup:[(0,u.D2)(h.checkCapslock,["native"]),(0,u.D2)(h.handleLogin,["enter","native"])],onBlur:n[2]||(n[2]=function(e){return g.capsTooltip=!1})},null,8,["modelValue","type","onKeyup"])),(0,l._)("span",{class:"show-pwd",onClick:n[3]||(n[3]=function(){return h.showPwd&&h.showPwd.apply(h,arguments)})},[(0,l.Wm)(y,{"icon-class":"password"===g.passwordType?"eye":"eye-open"},{default:(0,l.w5)((function(){return[(0,l.Wm)(F)]})),_:1},8,["icon-class"])])]})),_:1})]})),_:1},8,["modelValue"]),(0,l.Wm)(b,{loading:g.loading,type:"primary",style:{width:"100%","margin-bottom":"30px"},onClick:(0,u.iM)(h.handleLogin,["prevent"])},{default:(0,l.w5)((function(){return[w]})),_:1},8,["loading","onClick"])]})),_:1},8,["model","rules"])])}var h=o(85574),v=(o(77233),o(3336)),y=(o(21703),o(41539),o(47941),o(12826)),k=(o(18192),{name:"Login",data:function(){var e=function(e,n,o){(0,y.CI)(n)?o():o(new Error("请输入正确的用户名"))},n=function(e,n,o){0==n.length?o(new Error("请输入正确的密码")):o()};return{loginForm:{username:"admin",password:"admin"},loginRules:{username:[{required:!0,trigger:"blur",validator:e}],password:[{required:!0,trigger:"blur",validator:n}]},passwordType:"password",capsTooltip:!1,loading:!1,showDialog:!1,redirect:void 0,otherQuery:{}}},mounted:function(){""===this.loginForm.username?this.$refs.username.focus():""===this.loginForm.password&&this.$refs.password.focus(),document.title="登陆"},methods:{checkCapslock:function(e){var n=e.key;this.capsTooltip=n&&1===n.length&&n>="A"&&n<="Z"},showPwd:function(){var e=this;"password"===this.passwordType?this.passwordType="":this.passwordType="password",this.$nextTick((function(){e.$refs.password.focus()}))},handleLogin:function(){var e=this;this.$refs.loginForm.validate((function(n){if(!n)return console.log("error submit!!"),!1;var o=e;e.loading=!0,e.$axios.post("/login",e.loginForm).then((function(e){var n=e.data;if(200==n.code){var r=e.data,t=e.headers["authorization"];console.log((0,v.Z)(t),t),localStorage.setItem("token",e.headers["authorization"]),o.$store.commit("SET_USERINFO",r.data),h.z8.success(r.msg),window.location.href="/"}else console.log("====="),h.z8.error(n.msg)})).catch((function(n){e.loading=!1}))}))},getOtherQuery:function(e){return Object.keys(e).reduce((function(n,o){return"redirect"!==o&&(n[o]=e[o]),n}),{})}}}),_=o(40089);const T=(0,_.Z)(k,[["render",g],["__scopeId","data-v-11558830"]]);var F=T},86809:function(e,n,o){o(11758)},47113:function(e,n,o){o(11758)},62064:function(e,n,o){o(11758)},172:function(e,n,o){o(11758)}}]);
//# sourceMappingURL=411-legacy.7b6cb93e.js.map