"use strict";(self["webpackChunkpaike_sut"]=self["webpackChunkpaike_sut"]||[]).push([[20],{6020:function(e,s,t){t.r(s),t.d(s,{default:function(){return J}});t(7437),t(9910),t(33),t(6226),t(8474),t(6905),t(3069),t(6809),t(172),t(9007),t(7219),t(877),t(7579);var i=t(4143),a=t(4827),n=t(1853),l=t(1015),o=t(3209),d=t(426),u=t(1267),r=t(3060),h=t(1244),c=t(1832),y=t(3396),p=t(7139),m=t(9242);const f=e=>((0,y.dD)("data-v-a1e8e8c0"),e=e(),(0,y.Cn)(),e),g=f((()=>(0,y._)("h4",null,"报修信息管理",-1))),w=f((()=>(0,y._)("br",null,null,-1))),b=f((()=>(0,y._)("br",null,null,-1))),S=(0,y.Uk)("维修管理"),W=(0,y.Uk)("学院"),k=(0,y.Uk)("实验室门牌号"),L=(0,y.Uk)("实验室类型"),x=(0,y.Uk)("故障描述"),_=(0,y.Uk)(" 无需维修 "),z=(0,y.Uk)("故障描述"),C=f((()=>(0,y._)("br",null,null,-1))),I={key:0,style:{"text-align":"center"}},U=(0,y.Uk)("维修"),Y=(0,y.Uk)("维修");function V(e,s,t,f,V,v){const B=c.QQ,D=c.Lf,N=h.os,F=o.$Y,O=r.EZ,$=u.mi,J=d.R,P=o.eI,R=(0,y.up)("i-tickets"),T=l.gn,j=(0,y.up)("i-location-information"),H=(0,y.up)("i-timer"),Q=(0,y.up)("i-remove-filled"),Z=n.p8,q=n.Ub,E=a.d0,K=i.Kf;return(0,y.wg)(),(0,y.j4)(K,{class:"account-container"},{default:(0,y.w5)((()=>[g,w,(0,y.Wm)(D,{column:"2"},{default:(0,y.w5)((()=>[(0,y.Wm)(B,{label:"学院"},{default:(0,y.w5)((()=>[(0,y.Uk)((0,p.zw)(V.Yxs.dwmc),1)])),_:1}),(0,y.Wm)(B,{label:"二级管理员"},{default:(0,y.w5)((()=>[(0,y.Uk)((0,p.zw)(V.userInfo.userrealname),1)])),_:1})])),_:1}),(0,y.Wm)(N),b,(0,y.Wm)(P,{data:v.getSysFilter.slice((V.currentPage-1)*V.pagesize,V.currentPage*V.pagesize),style:{width:"100%"}},{append:(0,y.w5)((()=>[(0,y.Wm)(J,{onSizeChange:v.handleSizeChange,onCurrentChange:v.handleCurrentChange,"current-page":V.currentPage,"page-sizes":[5,10,20,40],"page-size":V.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:v.getSysFilter.length},null,8,["onSizeChange","onCurrentChange","current-page","page-size","total"])])),default:(0,y.w5)((()=>[(0,y.Wm)(F,{type:"index"}),(0,y.Wm)(F,{label:"实验名称",prop:"sysmc",width:"220rem"}),(0,y.Wm)(F,{label:"门牌号",prop:"sysmph"}),(0,y.Wm)(F,{label:"容量",prop:"capacity"}),(0,y.Wm)(F,{label:"状态",prop:"state"}),(0,y.Wm)(F,{label:"操作",width:"300rem"},{header:(0,y.w5)((()=>[(0,y.Wm)(O,{modelValue:V.search,"onUpdate:modelValue":s[0]||(s[0]=e=>V.search=e),placeholder:"输入实验室门牌号、名称过滤"},null,8,["modelValue"])])),default:(0,y.w5)((e=>[(0,y.Wm)($,{type:"primary",onClick:s=>v.repairSysDialog(e.row)},{default:(0,y.w5)((()=>[S])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),(0,y.Wm)(E,{modelValue:f.sysDialogVisible,"onUpdate:modelValue":s[3]||(s[3]=e=>f.sysDialogVisible=e),title:"报修信息管理",width:"60%","before-close":f.handleClose},{default:(0,y.w5)((()=>[(0,y.Wm)(q,{modelValue:V.activeName,"onUpdate:modelValue":s[2]||(s[2]=e=>V.activeName=e),onTabClick:v.handleClick},{default:(0,y.w5)((()=>[(0,y.Wm)(Z,{label:"非设备维修",name:"first"},{default:(0,y.w5)((()=>[(0,y.Wm)(D,{column:1,border:""},{default:(0,y.w5)((()=>[(0,y.Wm)(B,null,{label:(0,y.w5)((()=>[(0,y.Wm)(T,null,{default:(0,y.w5)((()=>[(0,y.Wm)(R)])),_:1}),W])),default:(0,y.w5)((()=>[(0,y.Uk)((0,p.zw)(V.Yxs.dwmc),1)])),_:1}),(0,y.Wm)(B,null,{label:(0,y.w5)((()=>[(0,y.Wm)(T,null,{default:(0,y.w5)((()=>[(0,y.Wm)(j)])),_:1}),k])),default:(0,y.w5)((()=>[(0,y.Uk)((0,p.zw)(V.Sys.sysmph),1)])),_:1}),(0,y.Wm)(B,null,{label:(0,y.w5)((()=>[(0,y.Wm)(T,null,{default:(0,y.w5)((()=>[(0,y.Wm)(H)])),_:1}),L])),default:(0,y.w5)((()=>[(0,y.Uk)(" "+(0,p.zw)(V.Sys.sysmc),1)])),_:1}),void 0==V.Sys.info?((0,y.wg)(),(0,y.j4)(B,{key:0},{label:(0,y.w5)((()=>[(0,y.Wm)(T,null,{default:(0,y.w5)((()=>[(0,y.Wm)(Q)])),_:1}),x])),default:(0,y.w5)((()=>[_])),_:1})):((0,y.wg)(),(0,y.j4)(B,{key:1},{label:(0,y.w5)((()=>[(0,y.Wm)(T,null,{default:(0,y.w5)((()=>[(0,y.Wm)(Q)])),_:1}),z])),default:(0,y.w5)((()=>[(0,y.Uk)(" "+(0,p.zw)(V.Sys.info),1)])),_:1}))])),_:1}),C,void 0!=V.Sys.info?((0,y.wg)(),(0,y.iD)("div",I,[(0,y.Wm)($,{size:"large",type:"primary",style:{width:"6rem"},onClick:s[1]||(s[1]=(0,m.iM)((e=>v.sysRepairButton()),["prevent"]))},{default:(0,y.w5)((()=>[U])),_:1})])):(0,y.kq)("",!0)])),_:1}),(0,y.Wm)(Z,{label:"设备维修",name:"second"},{default:(0,y.w5)((()=>[(0,y.Wm)(P,{data:v.sbTableInfo,style:{width:"100%"}},{default:(0,y.w5)((()=>[(0,y.Wm)(F,{type:"index"}),(0,y.Wm)(F,{label:"设备名称",prop:"sbmc"}),(0,y.Wm)(F,{label:"设备状态",prop:"state"}),(0,y.Wm)(F,{label:"故障信息",prop:"info"}),(0,y.Wm)(F,{label:"操作"},{default:(0,y.w5)((e=>[(0,y.Wm)($,{type:"primary",onClick:s=>v.sbRepairButton(e.row.sbh)},{default:(0,y.w5)((()=>[Y])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])])),_:1})])),_:1},8,["modelValue","onTabClick"])])),_:1},8,["modelValue","before-close"])])),_:1})}var v=t(1897),B=t(5574),D=(t(3970),t(7233),t(4870)),N=t(2826),F={setup(){const e=(0,D.iH)(""),s=(0,D.iH)(!1),t=e=>{v.T.confirm("确定关闭对话框?","温馨提示",{type:"info",center:!0}).then((()=>{e()}))};return{YxsOption:e,handleClose:t,sysDialogVisible:s}},created(){const e=sessionStorage.getItem("userInfo");e?this.userInfo=JSON.parse((0,N.Ne)(e)):this.$router.push("/login"),this.getSysListById(this.userInfo.yxsh),this.getYxsById(this.userInfo.yxsh)},data(){return{userInfo:null,currentPage:1,pagesize:10,search:"",Yxs:{},SysList:[],Sys:{},activeName:"first",SbList:[],Sb:{}}},methods:{handleSizeChange:function(e){this.pagesize=e},handleCurrentChange:function(e){this.currentPage=e},changeYxs(){this.Yxs=JSON.parse(JSON.stringify(this.YxsOption)),this.YxsOption=this.Yxs.dwmc,Loading.show(),this.getSysListById(this.Yxs.dwh),Loading.hide()},getYxsById(e){this.$axios.post("/weixin-yxs/yxsById",{id:e}).then((e=>{const s=e.data;200==s.code&&(this.Yxs=s.data)}))},getSysListById(e){this.$axios.post("/weixin-syszk/yxsFaultSysList",{id:e}).then((e=>{const s=e.data;200==s.code&&(this.SysList=s.data)}))},getSbFaultList(e){this.$axios.post("/weixin-sbzk/sbFaultSbList",{sysh:e}).then((e=>{const s=e.data;200==s.code&&(this.SbList=s.data)}))},repairSysDialog(e){this.Sys=JSON.parse(JSON.stringify(e)),this.sysDialogVisible=!0,Loading.show(),this.getSbFaultList(this.Sys.sysh),Loading.hide()},handleClick(e){"second"==e.props.name&&0==this.SbList.length&&(Loading.show(),this.getSbFaultList(this.Sys.sysh),Loading.hide())},sysRepairButton(){Loading.show(),this.$axios.post("/weixin-syszk/repairSys",{sysh:this.Sys.sysh,info:"",systype:"0"}).then((e=>{const s=e.data;200==s.code&&(B.z8.success("维修成功"),Loading.hide(),this.sysDialogVisible=!1,Loading.show(),this.getSysListById(this.Yxs.dwh),Loading.hide())})).catch((e=>{Loading.hide()}))},sbRepairButton(e){Loading.show(),this.$axios.post("/weixin-sbzk/repairSb",{sysh:this.Sys.sysh,info:"",sbzt:"0",sbh:e}).then((e=>{const s=e.data;200==s.code&&(B.z8.success("维修成功"),Loading.hide(),this.sysDialogVisible=!1,Loading.show(),this.getSysListById(this.Yxs.dwh),Loading.hide())})).catch((e=>{Loading.hide()}))}},computed:{getSysFilter(){return this.SysList.map((e=>(0==e.systype?e["state"]="开放":1==e.systype?e["state"]="禁用":e["state"]="报修",e))).filter((e=>!this.search||e.sysmc.includes(this.search.toLowerCase())||e.sysmph.includes(this.search.toLowerCase())||e.state.includes(this.search.toLowerCase())))},sbTableInfo(){return this.SbList.map((e=>(0==e.sbzt?e["state"]="开放":1==e.sbzt?e["state"]="禁用":e["state"]="报修",e)))}}},O=t(89);const $=(0,O.Z)(F,[["render",V],["__scopeId","data-v-a1e8e8c0"]]);var J=$},6809:function(e,s,t){t(1758)},7437:function(e,s,t){t(1758)},88:function(e,s,t){t(1758)},7579:function(e,s,t){t(1758)},877:function(e,s,t){t(1758),t(7579)},9910:function(e,s,t){t(1758),t(7195)},7219:function(e,s,t){t(1758)},172:function(e,s,t){t(1758)},3970:function(e,s,t){t(1758),t(6809),t(172),t(7195)},7960:function(e,s,t){t(1758)},7195:function(e,s,t){t(1758)},3069:function(e,s,t){t(1758),t(3877)},451:function(e,s,t){t(1758)},3877:function(e,s,t){t(1758),t(172),t(1430),t(7960),t(451),t(6467)},6226:function(e,s,t){t(1758)},9007:function(e,s,t){t(1758),t(88),t(1430)},6905:function(e,s,t){t(1758),t(88),t(1430),t(4566),t(451)},33:function(e,s,t){t(1758)}}]);
//# sourceMappingURL=20.808c9b25.js.map