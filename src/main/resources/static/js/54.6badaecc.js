"use strict";(self["webpackChunkpaike_sut"]=self["webpackChunkpaike_sut"]||[]).push([[54],{6054:function(e,s,t){t.r(s),t.d(s,{default:function(){return $}});t(7437),t(9910),t(33),t(6226),t(877),t(7579),t(8474),t(6905),t(3069),t(6809),t(172),t(9007),t(7219);var i=t(4143),a=t(4827),n=t(1853),l=t(1832),o=t(1015),d=t(3209),u=t(426),h=t(1267),r=t(3060),c=t(1244),y=t(3396),p=t(7139),m=t(9242);const f=e=>((0,y.dD)("data-v-3f205541"),e=e(),(0,y.Cn)(),e),g=f((()=>(0,y._)("h4",null,"报修信息管理",-1))),w=f((()=>(0,y._)("br",null,null,-1))),b=(0,y.Uk)("维修管理"),S=(0,y.Uk)("学院"),k=(0,y.Uk)("实验室门牌号"),L=(0,y.Uk)("实验室类型"),W=(0,y.Uk)("故障描述"),x=(0,y.Uk)(" 无需维修 "),_=(0,y.Uk)("故障描述"),C=f((()=>(0,y._)("br",null,null,-1))),z={key:0,style:{"text-align":"center"}},I=(0,y.Uk)("维修"),U=(0,y.Uk)("维修");function V(e,s,t,f,V,Y){const v=c.os,B=d.$Y,D=r.EZ,N=h.mi,F=u.R,O=d.eI,$=(0,y.up)("i-tickets"),J=o.gn,P=l.QQ,R=(0,y.up)("i-location-information"),T=(0,y.up)("i-timer"),j=(0,y.up)("i-remove-filled"),H=l.Lf,Q=n.p8,Z=n.Ub,q=a.d0,E=i.Kf;return(0,y.wg)(),(0,y.j4)(E,{class:"account-container"},{default:(0,y.w5)((()=>[g,(0,y.Wm)(v),w,(0,y.Wm)(O,{data:Y.getSysFilter.slice((V.currentPage-1)*V.pagesize,V.currentPage*V.pagesize),style:{width:"100%"}},{append:(0,y.w5)((()=>[(0,y.Wm)(F,{onSizeChange:Y.handleSizeChange,onCurrentChange:Y.handleCurrentChange,"current-page":V.currentPage,"page-sizes":[5,10,20,40],"page-size":V.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:Y.getSysFilter.length},null,8,["onSizeChange","onCurrentChange","current-page","page-size","total"])])),default:(0,y.w5)((()=>[(0,y.Wm)(B,{type:"index"}),(0,y.Wm)(B,{label:"实验名称",prop:"sysmc",width:"220rem"}),(0,y.Wm)(B,{label:"门牌号",prop:"sysmph"}),(0,y.Wm)(B,{label:"容量",prop:"capacity"}),(0,y.Wm)(B,{label:"状态",prop:"state"}),(0,y.Wm)(B,{label:"操作",width:"300rem"},{header:(0,y.w5)((()=>[(0,y.Wm)(D,{modelValue:V.search,"onUpdate:modelValue":s[0]||(s[0]=e=>V.search=e),placeholder:"输入实验室门牌号、名称过滤"},null,8,["modelValue"])])),default:(0,y.w5)((e=>[(0,y.Wm)(N,{type:"primary",onClick:s=>Y.repairSysDialog(e.row)},{default:(0,y.w5)((()=>[b])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),(0,y.Wm)(q,{modelValue:f.sysDialogVisible,"onUpdate:modelValue":s[3]||(s[3]=e=>f.sysDialogVisible=e),title:"报修信息管理",width:"60%","before-close":f.handleClose},{default:(0,y.w5)((()=>[(0,y.Wm)(Z,{modelValue:V.activeName,"onUpdate:modelValue":s[2]||(s[2]=e=>V.activeName=e),onTabClick:Y.handleClick},{default:(0,y.w5)((()=>[(0,y.Wm)(Q,{label:"非设备维修",name:"first"},{default:(0,y.w5)((()=>[(0,y.Wm)(H,{column:1,border:""},{default:(0,y.w5)((()=>[(0,y.Wm)(P,null,{label:(0,y.w5)((()=>[(0,y.Wm)(J,null,{default:(0,y.w5)((()=>[(0,y.Wm)($)])),_:1}),S])),default:(0,y.w5)((()=>[(0,y.Uk)((0,p.zw)(V.Yxs.dwmc),1)])),_:1}),(0,y.Wm)(P,null,{label:(0,y.w5)((()=>[(0,y.Wm)(J,null,{default:(0,y.w5)((()=>[(0,y.Wm)(R)])),_:1}),k])),default:(0,y.w5)((()=>[(0,y.Uk)((0,p.zw)(V.Sys.sysmph),1)])),_:1}),(0,y.Wm)(P,null,{label:(0,y.w5)((()=>[(0,y.Wm)(J,null,{default:(0,y.w5)((()=>[(0,y.Wm)(T)])),_:1}),L])),default:(0,y.w5)((()=>[(0,y.Uk)(" "+(0,p.zw)(V.Sys.sysmc),1)])),_:1}),void 0==V.Sys.info?((0,y.wg)(),(0,y.j4)(P,{key:0},{label:(0,y.w5)((()=>[(0,y.Wm)(J,null,{default:(0,y.w5)((()=>[(0,y.Wm)(j)])),_:1}),W])),default:(0,y.w5)((()=>[x])),_:1})):((0,y.wg)(),(0,y.j4)(P,{key:1},{label:(0,y.w5)((()=>[(0,y.Wm)(J,null,{default:(0,y.w5)((()=>[(0,y.Wm)(j)])),_:1}),_])),default:(0,y.w5)((()=>[(0,y.Uk)(" "+(0,p.zw)(V.Sys.info),1)])),_:1}))])),_:1}),C,void 0!=V.Sys.info?((0,y.wg)(),(0,y.iD)("div",z,[(0,y.Wm)(N,{size:"large",type:"primary",style:{width:"6rem"},onClick:s[1]||(s[1]=(0,m.iM)((e=>Y.sysRepairButton()),["prevent"]))},{default:(0,y.w5)((()=>[I])),_:1})])):(0,y.kq)("",!0)])),_:1}),(0,y.Wm)(Q,{label:"设备维修",name:"second"},{default:(0,y.w5)((()=>[(0,y.Wm)(O,{data:Y.sbTableInfo,style:{width:"100%"}},{default:(0,y.w5)((()=>[(0,y.Wm)(B,{type:"index"}),(0,y.Wm)(B,{label:"设备名称",prop:"sbmc"}),(0,y.Wm)(B,{label:"设备状态",prop:"state"}),(0,y.Wm)(B,{label:"故障信息",prop:"info"}),(0,y.Wm)(B,{label:"操作"},{default:(0,y.w5)((e=>[(0,y.Wm)(N,{type:"primary",onClick:s=>Y.sbRepairButton(e.row.sbh)},{default:(0,y.w5)((()=>[U])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])])),_:1})])),_:1},8,["modelValue","onTabClick"])])),_:1},8,["modelValue","before-close"])])),_:1})}var Y=t(1897),v=t(5574),B=(t(3970),t(7233),t(4870)),D=t(2826),N={setup(){const e=(0,B.iH)(""),s=(0,B.iH)(!1),t=e=>{Y.T.confirm("确定关闭对话框?","温馨提示",{type:"info",center:!0}).then((()=>{e()}))};return{YxsOption:e,handleClose:t,sysDialogVisible:s}},created(){const e=sessionStorage.getItem("userInfo");e?this.userInfo=JSON.parse((0,D.Ne)(e)):this.$router.push("/login"),this.getSysListById(this.userInfo.yxsh),this.getYxsById(this.userInfo.yxsh)},data(){return{userInfo:null,currentPage:1,pagesize:10,search:"",Yxs:{},SysList:[],Sys:{},activeName:"first",SbList:[],Sb:{}}},methods:{handleSizeChange:function(e){this.pagesize=e},handleCurrentChange:function(e){this.currentPage=e},changeYxs(){this.Yxs=JSON.parse(JSON.stringify(this.YxsOption)),this.YxsOption=this.Yxs.dwmc,Loading.show(),this.getSysListById(this.Yxs.dwh),Loading.hide()},getYxsById(e){this.$axios.post("/weixin-yxs/yxsById",{id:e}).then((e=>{const s=e.data;200==s.code&&(this.Yxs=s.data)}))},getSysListById(e){this.$axios.post("/weixin-syszk/yxsFaultSysList",{id:e}).then((e=>{const s=e.data;200==s.code&&(this.SysList=s.data)}))},getSbFaultList(e){this.$axios.post("/weixin-sbzk/sbFaultSbList",{sysh:e}).then((e=>{const s=e.data;200==s.code&&(this.SbList=s.data)}))},repairSysDialog(e){this.Sys=JSON.parse(JSON.stringify(e)),this.sysDialogVisible=!0,Loading.show(),this.getSbFaultList(this.Sys.sysh),Loading.hide()},handleClick(e){"second"==e.props.name&&0==this.SbList.length&&(Loading.show(),this.getSbFaultList(this.Sys.sysh),Loading.hide())},sysRepairButton(){Loading.show(),this.$axios.post("/weixin-syszk/repairSys",{sysh:this.Sys.sysh,info:"",systype:"0"}).then((e=>{const s=e.data;200==s.code&&(v.z8.success("维修成功"),Loading.hide(),this.sysDialogVisible=!1,Loading.show(),this.getSysListById(this.Yxs.dwh),Loading.hide())})).catch((e=>{Loading.hide()}))},sbRepairButton(e){Loading.show(),this.$axios.post("/weixin-sbzk/repairSb",{sysh:this.Sys.sysh,info:"",sbzt:"0",sbh:e}).then((e=>{const s=e.data;200==s.code&&(v.z8.success("维修成功"),Loading.hide(),this.sysDialogVisible=!1,Loading.show(),this.getSysListById(this.Yxs.dwh),Loading.hide())})).catch((e=>{Loading.hide()}))}},computed:{getSysFilter(){return this.SysList.map((e=>(0==e.systype?e["state"]="开放":1==e.systype?e["state"]="禁用":e["state"]="报修",e))).filter((e=>!this.search||e.sysmc.includes(this.search.toLowerCase())||e.sysmph.includes(this.search.toLowerCase())||e.state.includes(this.search.toLowerCase())))},sbTableInfo(){return this.SbList.map((e=>(0==e.sbzt?e["state"]="开放":1==e.sbzt?e["state"]="禁用":e["state"]="报修",e)))}}},F=t(89);const O=(0,F.Z)(N,[["render",V],["__scopeId","data-v-3f205541"]]);var $=O},6809:function(e,s,t){t(1758)},7437:function(e,s,t){t(1758)},88:function(e,s,t){t(1758)},7579:function(e,s,t){t(1758)},877:function(e,s,t){t(1758),t(7579)},9910:function(e,s,t){t(1758),t(7195)},7219:function(e,s,t){t(1758)},172:function(e,s,t){t(1758)},3970:function(e,s,t){t(1758),t(6809),t(172),t(7195)},7960:function(e,s,t){t(1758)},7195:function(e,s,t){t(1758)},3069:function(e,s,t){t(1758),t(3877)},451:function(e,s,t){t(1758)},3877:function(e,s,t){t(1758),t(172),t(1430),t(7960),t(451),t(6467)},6226:function(e,s,t){t(1758)},9007:function(e,s,t){t(1758),t(88),t(1430)},6905:function(e,s,t){t(1758),t(88),t(1430),t(4566),t(451)},33:function(e,s,t){t(1758)}}]);
//# sourceMappingURL=54.6badaecc.js.map